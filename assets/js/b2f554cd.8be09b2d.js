"use strict";(self.webpackChunkblog_2023=self.webpackChunkblog_2023||[]).push([[1477],{10:n=>{n.exports=JSON.parse('{"blogPosts":[{"id":"react-hooks","metadata":{"permalink":"/blog/react-hooks","source":"@site/blog/react/hooks.md","title":"react hooks \u5b66\u4e60","description":"\u7b80\u4ecb","date":"2021-05-14T00:00:00.000Z","formattedDate":"May 14, 2021","tags":[{"label":"React","permalink":"/blog/tags/react"}],"readingTime":5.645,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"react hooks \u5b66\u4e60","date":"2021-05-14T00:00:00.000Z","slug":"react-hooks","tags":["React"]},"nextItem":{"title":"TypeScript\u6cdb\u578b","permalink":"/blog/ts/generics"}},"content":"## \u7b80\u4ecb\\n\\nHook \u662f react 16.8 \u65b0\u589e\u7684\u7279\u6027\u3002\u5b83\u53ef\u4ee5\u8d4b\u4e88 functional component \u4f7f\u7528 state \u7684\u80fd\u529b\uff0c\u4ee5\u53ca\u5176\u4ed6\u7684 react \u7279\u6027\u3002\\n\\n\x3c!-- truncate --\x3e\\n\\n\x3c!-- ## 1. useState\\n\\n```jsx\\nimport React, { useState } from \\"react\\";\\nexport default function App() {\\n  // \u901a\u8fc7\u6570\u7ec4\u89e3\u6784\u7684\u65b9\u5f0f\u8fd4\u56de\u4e86\u4e00\u4e2a\u521d\u59cb\u503c\u4e3a 0 \u7684\u53d8\u91cf count\uff0c\u4ee5\u53ca\u6539\u53d8\u8be5\u503c\u7684\u65b9\u6cd5 setCount\\n  const [count, setCount] = useState(0);\\n  // \u58f0\u660e\u591a\u4e2a state \u53d8\u91cf\\n  const [isOk, setIsOk] = useState(true);\\n  const [name, setName] = useState(\'Steven\');\\n  return (\\n    <div>\\n      <p>You clicked {count} times</p>\\n      <button onClick={() => setCount(count + 1)}>Click me</button>\\n    </div>\\n  );\\n}\\n```\\n\\n<iframe src=\\"https://codesandbox.io/embed/hooks-usestate-dmnew?fontsize=14&hidenavigation=1&theme=dark&view=preview\\"\\n    style=\\"width: 100%;height: 500px; border: 0;border-radius: 4px;overflow: hidden;\\"\\n    title=\\"hooks-useState\\"\\n    allow=\\"accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking\\"\\n    sandbox=\\"allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts\\"\\n></iframe>\\n\\n## 2. useEffect\\n\\nuseEffect hook \u63a5\u6536\u4e00\u4e2a\u51fd\u6570\u4f5c\u4e3a\u53c2\u6570\uff0cReact\u4f1a\u5728\u6bcf\u6b21\u91cd\u65b0\u6e32\u67d3\u540e\u8c03\u7528\u8be5\u526f\u4f5c\u7528\u51fd\u6570\uff0c\u5305\u62ec\u9996\u6b21\u6e32\u67d3\uff1b\u6211\u4eec\u53ef\u4ee5\u628a\u5b83\u5f53\u4f5c componentDidMount\u3001componentDidUpdate\u3001componentWillUnmount \u4e09\u8005\u5408\u5e76\u5408\u4e00\u7684 api\u6765\u4f7f\u7528\u3002\u9996\u6b21\u8c03\u7528\u5373\u76f8\u5f53\u4e8e componentDidMount \u751f\u547d\u5468\u671f\u7684\u4f5c\u7528\uff0c\u540e\u7eed\u6bcf\u6b21 update \u540e\u8c03\u7528\u5c31\u76f8\u5f53\u4e8e componentDidUpdate \u751f\u547d\u5468\u671f\u7684\u4f5c\u7528\uff0c\u5728\u51fd\u6570\u4e2d\u8fd4\u56de\u4e00\u4e2a\u65b9\u6cd5\uff0c\u7528\u6765\u6e05\u9664\u526f\u4f5c\u7528\uff0c\u529f\u80fd\u7c7b\u4f3c componentWillUnmount \u751f\u547d\u5468\u671f\u65b9\u6cd5\uff0c\u6bcf\u6b21\u6267\u884c\u526f\u4f5c\u7528\u51fd\u6570\u524d\u90fd\u4f1a\u5148\u6267\u884c\u6e05\u9664\u65b9\u6cd5\u6e05\u9664\u4e0a\u4e00\u4e2a effect\u3002\\n\\n\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u6bcf\u6b21\u6e32\u67d3\u540e\u90fd\u6267\u884c\u6e05\u7406\u6216\u8005\u6267\u884c effect \u53ef\u80fd\u4f1a\u5bfc\u81f4\u6027\u80fd\u95ee\u9898\uff0c\u4f18\u5316\u65b9\u6cd5\uff0c useEffect \u4f7f\u7528\u7b2c\u4e8c\u4e2a\u53c2\u6570\u58f0\u660e\u4f9d\u8d56\u7684 state \u53d8\u91cf\u6570\u7ec4\uff0c\u53ea\u6709\u8be5\u6570\u7ec4\u4e2d\u7684\u53d8\u91cf\u6539\u53d8\uff0c\u624d\u4f1a\u6267\u884c\u526f\u4f5c\u7528\u51fd\u6570\uff0c\u5f53\u8be5\u4f9d\u8d56\u4e3a\u7a7a\u6570\u636e\uff0c\u5219\u526f\u4f5c\u7528\u51fd\u6570\u53ea\u5728\u9996\u6b21\u6e32\u67d3\u7684\u65f6\u5019\u6267\u884c\uff08\u4ec5\u6267\u884c\uff09\u4e00\u6b21\u3002\\n\\n```jsx\\nimport React, { useState, useEffect } from \\"react\\";\\nexport default function App() {\\n  const [count, setCount] = useState(0);\\n  useEffect(() => {\\n    console.log(\\"components updated\\");\\n    // \u6e05\u9664\u526f\u4f5c\u7528\uff0c\u76f8\u5f53\u4e8e componentWillUnmount \u751f\u547d\u5468\u671f\u7684\u4f5c\u7528\\n    return () => {\\n      console.log(\\"componentWillUnmount\\");\\n    };\\n    // count \u6539\u53d8\uff0c\u5c31\u4f1a\u6267\u884c\u526f\u4f5c\u7528\u51fd\u6570\\n  }, [count]);\\n  return (\\n    <div>\\n      <p>You clicked {count} times</p>\\n      <button onClick={() => setCount(count + 1)}>Click me</button>\\n    </div>\\n  );\\n}\\n```\\n<iframe src=\\"https://codesandbox.io/embed/hooks-useeffect-kvnk9?fontsize=14&hidenavigation=1&theme=dark&view=preview\\"\\n    style=\\"width: 100%;height: 500px; border: 0;border-radius: 4px;overflow: hidden;\\"\\n    title=\\"hooks-useEffect\\"\\n    allow=\\"accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking\\"\\n    sandbox=\\"allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts\\"\\n></iframe>\\n\\n## 3. useContext \u4e0a\u4e0b\u6587\\n\\n```js\\nconst Value = useContext(MyContext)\\n```\\n\u8be5 hook \u63a5\u6536\u4e00\u4e2a context \u5bf9\u8c61\uff08React.createContext\u7684\u8fd4\u56de\u503c\uff09\u5e76\u8fd4\u56de\u8be5 context \u7684\u5f53\u524d\u503c\uff0c\u4e00\u822c\u53ef\u4ee5\u7528\u5728\u8de8\u591a\u5c42\u7ea7\u7ec4\u4ef6\u4e4b\u95f4\u7684\u503c\u7684\u4f20\u9012\uff0c\u4e3e\u4e2a\u4e0b\u9762\u7684\u4f8b\u5b50\u6765\u770b\u4e00\u4e0b\uff1a\\n\\n```jsx\\nimport React, { createContext, useContext } from \\"react\\";\\nimport \\"./styles.css\\";\\n\\nconst userInfo = {\\n  name: \\"Steven\\",\\n  age: 20,\\n  location: \\"Shanghai\\"\\n};\\n\\nconst UserInfoContext = createContext();\\n\\nfunction Son() {\\n  return <GrandSon />;\\n}\\n\\nfunction GrandSon() {\\n  const { name, age, location } = useContext(UserInfoContext);\\n  return (\\n    <div>\\n      <p>\u6700\u5916\u5c42\u7ec4\u4ef6\u4f20\u6765\u7684\u503c\uff1a</p>\\n      <p>name: {name}</p>\\n      <p>age: {age}</p>\\n      <p>location: {location}</p>\\n    </div>\\n  );\\n}\\n\\nexport default function App() {\\n  return (\\n    <div>\\n      <UserInfoContext.Provider value={userInfo}>\\n        <Son />\\n      </UserInfoContext.Provider>\\n    </div>\\n  );\\n}\\n```\\n<iframe src=\\"https://codesandbox.io/embed/hooks-usecontext-pt0ve?fontsize=14&hidenavigation=1&theme=dark&view=preview\\"\\n    style=\\"width: 100%;height: 500px; border: 0;border-radius: 4px;overflow: hidden;\\"\\n    title=\\"hooks-useContext\\"\\n    allow=\\"accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking\\"\\n    sandbox=\\"allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts\\"\\n></iframe>\\n\\n## 4. useReducer\\n\\n\u7c7b\u4f3c useState\uff0c\u8fd4\u56de\u7684\u662f\u5f53\u524d\u7684 state \u4ee5\u53ca\u914d\u5957\u7684 dispatch \u65b9\u6cd5 \uff0c\u5728 state \u903b\u8f91\u590d\u6742\u5e76\u4e14\u5305\u542b\u591a\u4e2a\u5b50\u503c\u7684\u65f6\u5019\u53ef\u4ee5\u4f7f\u7528\uff0c\u6211\u4eec\u6765\u6539\u5199\u4e00\u4e0b\u4e0a\u9762 useState \u7684\u4f8b\u5b50\uff1a\\n\\n```jsx\\nimport React, { useReducer } from \\"react\\";\\nimport \\"./styles.css\\";\\nconst initialState = { count: 0 };\\nfunction reducer(state, action) {\\n  switch (action.type) {\\n    case \\"increment\\":\\n      return { count: state.count + 1 };\\n    case \\"decrement\\":\\n      return { count: state.count - 1 };\\n    default:\\n      throw new Error();\\n  }\\n}\\n\\nexport default function App() {\\n  const [state, dispatch] = useReducer(reducer, initialState);\\n  return (\\n    <>\\n      Count: {state.count}\\n      <button onClick={() => dispatch({ type: \\"decrement\\" })}>-</button>\\n      <button onClick={() => dispatch({ type: \\"increment\\" })}>+</button>\\n    </>\\n  );\\n}\\n```\\n<iframe src=\\"https://codesandbox.io/embed/hooks-usereducer-80gfc?fontsize=14&hidenavigation=1&theme=dark&view=preview\\"\\n    style=\\"width: 100%;height: 500px; border: 0;border-radius: 4px;overflow: hidden;\\"\\n    title=\\"hooks-useReducer\\"\\n    allow=\\"accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking\\"\\n    sandbox=\\"allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts\\"\\n></iframe>\\n\\n## 5. useCallback\u3001useMeno\\n\\nuseCallback \u8fd4\u56de\u4e00\u4e2a memoized\uff08\u8bb0\u5fc6\u5316\uff09\u7684\u65b9\u6cd5\u3002\\n\\n```js\\nconst memoizedCallback = useCallback(\\n  () => {\\n    doSomething(a, b);\\n  },\\n  [a, b],\\n);\\n```\\n\\nuseCallback(fn, deps) \u76f8\u5f53\u4e8e useMemo(() => fn, deps)\u3002\\n\\n\u5728\u5b50\u7ec4\u4ef6\u4e0d\u9700\u8981\u7236\u7ec4\u4ef6\u7684\u503c\u548c\u51fd\u6570\u7684\u60c5\u51b5\u4e0b\uff0c\u53ea\u9700\u8981\u4f7f\u7528memo\u51fd\u6570\u5305\u88f9\u5b50\u7ec4\u4ef6\u5373\u53ef\u3002\u800c\u5728\u4f7f\u7528\u51fd\u6570\u7684\u60c5\u51b5\uff0c\u9700\u8981\u8003\u8651\u6709\u6ca1\u6709\u51fd\u6570\u4f20\u9012\u7ed9\u5b50\u7ec4\u4ef6\u4f7f\u7528useCallback\u3002\u800c\u5728\u503c\u6709\u6240\u4f9d\u8d56\u7684\u9879\uff0c\u5e76\u4e14\u662f\u5bf9\u8c61\u548c\u6570\u7ec4\u7b49\u503c\u7684\u65f6\u5019\u800c\u4f7f\u7528useMemo\uff08\u5f53\u8fd4\u56de\u7684\u662f\u539f\u59cb\u6570\u636e\u7c7b\u578b\u5982\u5b57\u7b26\u4e32\u3001\u6570\u5b57\u3001\u5e03\u5c14\u503c\uff0c\u5c31\u4e0d\u8981\u4f7f\u7528useMemo\u4e86\uff09\u3002\u4e0d\u8981\u76f2\u76ee\u4f7f\u7528\u8fd9\u4e9bhooks\uff0c\u6709\u65f6\u5019\u751a\u81f3\u4f1a\u589e\u52a0\u6027\u80fd\u4e0a\u7684\u635f\u8017\u3002\\n\\n## 6. useRef\\n\\n```js\\nimport React, { useRef } from \\"react\\";\\nexport default function App() {\\n  const inputEl = useRef(null);\\n  const onButtonClick = () => {\\n    // `current` \u6307\u5411\u5df2\u6302\u8f7d\u5230 DOM \u4e0a\u7684\u6587\u672c\u8f93\u5165\u5143\u7d20\\n    inputEl.current.focus();\\n  };\\n  return (\\n    <>\\n      <input ref={inputEl} type=\\"text\\" />\\n      <button onClick={onButtonClick}>Focus the input</button>\\n    </>\\n  );\\n}\\n```\\n<iframe src=\\"https://codesandbox.io/embed/hooks-useref-gn1or?fontsize=14&hidenavigation=1&theme=dark&view=preview\\"\\n    style=\\"width: 100%;height: 500px; border: 0;border-radius: 4px;overflow: hidden;\\"\\n    title=\\"hooks-useRef\\"\\n    allow=\\"accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking\\"\\n    sandbox=\\"allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts\\"\\n></iframe> --\x3e"},{"id":"/ts/generics","metadata":{"permalink":"/blog/ts/generics","source":"@site/blog/ts/generics.md","title":"TypeScript\u6cdb\u578b","description":"ts\u6cdb\u578b\u7684\u5b66\u4e60\u8bb0\u5f55","date":"2021-04-30T00:00:00.000Z","formattedDate":"April 30, 2021","tags":[{"label":"TypeScript","permalink":"/blog/tags/type-script"}],"readingTime":1.39,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"TypeScript\u6cdb\u578b","date":"2021-04-30T00:00:00.000Z","tags":["TypeScript"]},"prevItem":{"title":"react hooks \u5b66\u4e60","permalink":"/blog/react-hooks"},"nextItem":{"title":"TypeScript\u7c7b","permalink":"/blog/ts-class"}},"content":"ts\u6cdb\u578b\u7684\u5b66\u4e60\u8bb0\u5f55\\n\\n\x3c!-- truncate --\x3e\\n\\n## \u4ec0\u4e48\u662f\u6cdb\u578b\uff1f\\n\\n\u6cdb\u578b\u662f\u6307\u5728\u5b9a\u4e49\u51fd\u6570\u3001\u63a5\u53e3\u7684\u65f6\u5019\uff0c\u4e0d\u6307\u5b9a\u5177\u4f53\u7684\u7c7b\u578b\uff0c\u800c\u662f\u5728\u4f7f\u7528\u7684\u65f6\u5019\u518d\u6307\u5b9a\u5177\u4f53\u7c7b\u578b\uff0c\u8fd9\u6837\u5c31\u5927\u5927\u7684\u63d0\u9ad8\u4e86\u65b9\u6cd5\u3001\u63a5\u53e3\u7684\u590d\u7528\u6027\uff0c\u4f7f\u5f97\u65b9\u6cd5\u3001\u63a5\u53e3\u5341\u5206\u7684\u7075\u6d3b\u3002\\n\\n## \u7b80\u5355\u793a\u4f8b\\n\\n```typescript\\nfunction sayName<T>(name: T): T {\\n  return name;\\n}\\nconst returnName1 = sayName(\'2\');\\nconst returnName2 = sayName(2);\\nconsole.log(returnName1, returnName2, \'name\')\\n\\n// \u591a\u4e2a\u7c7b\u578b\u53c2\u6570\\nfunction swap<T, U>(tuple: [T, U]): [T, U] {\\n  return [tuple[0], tuple[1]]\\n}\\nswap([\'xiaoming\', 20])\\n```\\n\\n## \u6cdb\u578b\u7ea6\u675f\\n\\n\u56e0\u4e3a\u6211\u4eec\u5728\u4f7f\u7528\u7684\u65f6\u5019\u8fd8\u4e0d\u786e\u5b9a\u7c7b\u578b\uff0c\u6240\u4ee5\u5728\u51fd\u6570\u5185\u90e8\u4f7f\u7528\u53d8\u91cf\u7684\u65f6\u5019\uff0c\u4e0d\u80fd\u968f\u4fbf\u64cd\u4f5c\u5b83\u7684\u65b9\u6cd5\u6216\u8005\u5c5e\u6027\uff0c\u4e3e\u4e2a\u4f8b\u5b50\uff1a\\n\\n```typescript\\nfunction sayHello<T>(params: T): T {\\n  console.log(params.length)  // Property \'length\' does not exist on type \'T\'.(2339)\uff1b\u5f88\u7b80\u5355\uff0c\u5982\u679c\u6211\u4eec\u7684 T \u4e3a number \u7c7b\u578b\uff0c\u5f88\u663e\u793a number \u662f\u6ca1\u6709 length \u8fd9\u4e2a\u5c5e\u6027\u7684\u3002\\n  return params\\n}\\n```\\n\u8fd9\u4e2a\u65f6\u5019\u6211\u4eec\u9700\u8981\u5bf9\u6cdb\u578b\u8fdb\u884c\u7ea6\u675f\uff0c\u9650\u5236\u8be5\u51fd\u6570\u53ea\u5141\u8bb8\u4f20\u5165\u542b\u6709 length \u5c5e\u6027\u7684\u53d8\u91cf\\n\\n```typescript\\ninterface MustLength {\\n  length: number;\\n}\\nfunction sayHello<T extends MustLength>(params: T): T {\\n  console.log(params.length);\\n  return params;\\n}\\n```"},{"id":"ts-class","metadata":{"permalink":"/blog/ts-class","source":"@site/blog/ts/class.md","title":"TypeScript\u7c7b","description":"ts\u7c7b\u7684\u5b66\u4e60\u8bb0\u5f55","date":"2021-04-28T00:00:00.000Z","formattedDate":"April 28, 2021","tags":[{"label":"TypeScript","permalink":"/blog/tags/type-script"}],"readingTime":3.42,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"TypeScript\u7c7b","date":"2021-04-28T00:00:00.000Z","slug":"ts-class","tags":["TypeScript"]},"prevItem":{"title":"TypeScript\u6cdb\u578b","permalink":"/blog/ts/generics"},"nextItem":{"title":"TypeScript\u63a5\u53e3","permalink":"/blog/ts-interface"}},"content":"ts\u7c7b\u7684\u5b66\u4e60\u8bb0\u5f55\\n\\n\x3c!-- truncate --\x3e\\n\\n## \u7c7b\u5b9a\u4e49\\n\\n```typescript\\nclass Person {\\n    name: string\\n    constructor(name: string) {\\n        this.name = name\\n    }\\n    sayName() {\\n        console.log(this.name)\\n    }\\n}\\nconst p = new Person(\'Steven\')\\nconsole.log(p.name) // Steven\\np.sayName()  // Steven\\n```\\n\\n## \u7ee7\u627f\\n\\n```typescript\\nclass Person {\\n  name: string\\n  constructor(name: string) {\\n    this.name = name\\n  }\\n  sayName() {\\n    console.log(this.name)\\n  }\\n}\\nclass Student extends Person {\\n  name: string\\n  constructor(name) {\\n    super(name)\\n  }\\n  sing() {\\n    console.log(`${this.name} singing now!`)\\n  }\\n}\\nconst p = new Student(\'Steven\')\\nconsole.log(p.name) // Steven\\np.sing()  // Steven singing now!\\n```\\n\\n## \u8bbf\u95ee\u4fee\u9970\u7b26\\n\\n\u5728 ts \u4e2d\u53ef\u4ee5\u4f7f\u7528\u4e09\u79cd\u8bbf\u95ee\u4fee\u9970\u7b26\uff0c\u5206\u522b\u662f ***public***\u3001***private*** \u548c ***protected***  \\n\\n- public: \u4fee\u9970\u7684\u5c5e\u6027\u6216\u65b9\u6cd5\u662f\u516c\u6709\u7684\uff0c\u53ef\u4ee5\u5728\u4efb\u4f55\u5730\u65b9\u88ab\u8bbf\u95ee\u5230\uff0c\u9ed8\u8ba4\u6240\u6709\u7684\u5c5e\u6027\u548c\u65b9\u6cd5\u90fd\u662f ***public***\\n- private\uff1a\u4fee\u9970\u7684\u5c5e\u6027\u6216\u65b9\u6cd5\u662f\u79c1\u6709\u7684\uff0c\u4e0d\u80fd\u5728\u58f0\u660e\u5b83\u7684\u7c7b\u7684\u5916\u90e8\u8bbf\u95ee\\n- protected\uff1a\u4fee\u9970\u7684\u5c5e\u6027\u6216\u65b9\u6cd5\u662f\u53d7\u4fdd\u62a4\u7684\uff0c\u5b83\u548c ***private*** \u7c7b\u4f3c\uff0c\u4f46\u662f\u5b83\u5728\u5b50\u7c7b\u4e2d\u662f\u5141\u8bb8\u88ab\u8bbf\u95ee\u7684\\n\\n```typescript\\nclass Person {\\n    public name: string\\n    public constructor(name: string) {\\n        this.name = name\\n    }\\n    public sayName() {\\n        console.log(this.name)\\n    }\\n}\\nconst p = new Person(\'Steven\')\\np.sayName()\\n```\\n\\nprivate \u79c1\u6709\u5c5e\u6027\uff0c\u53ea\u80fd\u5728\u7c7b\u4e2d\u8bbf\u95ee\u7684\u5c5e\u6027\uff0c\u5b50\u7c7b\u4e0e\u5b9e\u4f8b\u4e2d\u5747\u65e0\u6cd5\u8bbf\u95ee\\n```typescript\\nclass Person {\\n    private name: string\\n    public constructor(name: string) {\\n        this.name = name\\n    }\\n    public sayName() {\\n        console.log(this.name)\\n    }\\n}\\nconst p = new Person(\'Steven\')\\nconsole.log(p.name)\\np.sayName()\\n\\nclass Student extends Person {\\n    constructor(name) {\\n        super(name)\\n        console.log(this.name)  // \u5c5e\u6027\u201cname\u201d\u4e3a\u79c1\u6709\u5c5e\u6027\uff0c\u53ea\u80fd\u5728\u7c7b\u201cPerson\u201d\u4e2d\u8bbf\u95ee\u3002ts(2341)\\n    }\\n}\\n\\n```\\n![image.png](https://i.loli.net/2021/05/10/IZ86eS1oMBAyX2p.png)\\n\\nprotected \u8ddf private \u76f8\u4f3c\uff0c\u53ea\u80fd\u5728\u7c7b\u4e2d\u4f7f\u7528\uff0c\u4f46\u662f protected \u53ef\u4ee5\u5728\u7ee7\u627f\u7684\u5b50\u7c7b\u4e2d\u88ab\u8bbf\u95ee\\n\\n```typescript\\nclass Person {\\n  protected name: string\\n  public constructor(name: string) {\\n    this.name = name\\n  }\\n  public sayName() {\\n    console.log(this.name)\\n  }\\n}\\n\\nclass Student extends Person {\\n  constructor(name) {\\n    super(name)\\n    console.log(this.name) // \u5b50\u7c7b\u4e2d\u53ef\u4ee5\u6b63\u5e38\u8bbf\u95ee\\n  }\\n}\\n\\nconst p = new Student(\'Steven\')\\nconsole.log(p.name) // \u5c5e\u6027\u201cname\u201d\u53d7\u4fdd\u62a4\uff0c\u53ea\u80fd\u5728\u7c7b\u201cPerson\u201d\u53ca\u5176\u5b50\u7c7b\u4e2d\u8bbf\u95ee\u3002ts(2445)\\np.sayName()\\n```\\n\\n## \u9759\u6001\u5c5e\u6027\\n\\n\u53ea\u80fd\u901a\u8fc7\u7c7b\u76f4\u63a5\u8bbf\u95ee\u7684\u5c5e\u6027\u6216\u65b9\u6cd5\uff0c\u5b9e\u4f8b\u65e0\u6cd5\u8c03\u7528\u3002\\n\\n```typescript\\nclass Person {\\n  private name: string\\n    static age: number = 20 // \u9759\u6001\u5c5e\u6027\\n  constructor(name) {\\n    this.name = name\\n  }\\n  sayName() {\\n    console.log(this.name)\\n  }\\n  // \u901a\u8fc7 static \u5b9a\u4e49\u9759\u6001\u65b9\u6cd5\\n  static sing() {\\n    console.log(`singing now !`)\\n  }\\n}\\nPerson.sing()  // singing now !\\nconsole.log(Person.age);  // 20\\n```\\n\\n## \u7c7b\u5b9e\u73b0\u63a5\u53e3  implements\\n\\n```ts\\ninterface LiveProp {\\n  name: string,\\n  id: number,\\n  alert(): void;\\n}\\n\\nclass Live implements LiveProp {\\n  name: string\\n  id: number\\n  constructor(name: string, id: number) {\\n    this.name = name;\\n    this.id = id;\\n  }\\n  alert() {}\\n}\\n```\\n\\n## \u62bd\u8c61\u7c7b\\n\\n- \u62bd\u8c61\u7c7b\u4e00\u822c\u4f5c\u4e3a\u57fa\u7c7b\u6765\u4f7f\u7528\uff0c\u53ea\u80fd\u88ab\u7ee7\u627f\uff0c\u4e0d\u4f1a\u7528\u6765\u76f4\u63a5\u5b9e\u4f8b\u5316\\n- \u62bd\u8c61\u7c7b\u53ef\u4ee5\u5199\u5165\u62bd\u8c61\u65b9\u6cd5\uff0c\u62bd\u8c61\u65b9\u6cd5\u4e0d\u80fd\u5177\u4f53\u5b9e\u73b0\\n- \u5b50\u7c7b\u7ee7\u627f\u62bd\u8c61\u7c7b\u540e\uff0c\u62bd\u8c61\u7c7b\u7684\u62bd\u8c61\u65b9\u6cd5\u5fc5\u987b\u5728\u5b50\u7c7b\u91cc\u9762\u5b9e\u73b0\uff0c\u5426\u5219\u62a5\u9519\\n\\n```typescript\\nabstract class Animal {\\n  name: string\\n  constructor(name) {\\n    this.name = name\\n  }\\n  abstract eat()  // \u62bd\u8c61\u65b9\u6cd5\uff0c\u5728\u62bd\u8c61\u7c7b\u4e2d\u4e0d\u9700\u8981\u5b9e\u73b0\\n}\\n\\nclass Dog extends Animal {\\n  constructor(name) {\\n    super(name)\\n  }\\n  eat() {\\n    console.log(this.name)\\n  }\\n}\\nconst dog = new Dog(\'xiaohuang\')\\ndog.eat()  // xiaohuang\\n```"},{"id":"ts-interface","metadata":{"permalink":"/blog/ts-interface","source":"@site/blog/ts/interface.md","title":"TypeScript\u63a5\u53e3","description":"ts\u63a5\u53e3\u7684\u5b66\u4e60\u8bb0\u5f55","date":"2021-04-23T00:00:00.000Z","formattedDate":"April 23, 2021","tags":[{"label":"TypeScript","permalink":"/blog/tags/type-script"}],"readingTime":2.685,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"TypeScript\u63a5\u53e3","date":"2021-04-23T00:00:00.000Z","slug":"ts-interface","tags":["TypeScript"]},"prevItem":{"title":"TypeScript\u7c7b","permalink":"/blog/ts-class"},"nextItem":{"title":"TypeScript\u8054\u5408\u7c7b\u578b","permalink":"/blog/ts-union-types"}},"content":"ts\u63a5\u53e3\u7684\u5b66\u4e60\u8bb0\u5f55\\n\\n\x3c!-- truncate --\x3e\\n\\n## \u4ec0\u4e48\u662f\u63a5\u53e3\\n\\n\u5728\u9762\u5411\u5bf9\u8c61\u7684\u8bed\u8a00\u4e2d\uff0c\u63a5\u53e3\u662f\u5bf9\u884c\u4e3a\u7684\u62bd\u8c61\uff0c\u800c\u5177\u4f53\u5982\u4f55\u5904\u7406\u662f\u7531\u7c7b\uff08class\uff09\u53bb\u5b9e\u73b0\uff08implement\uff09\uff1b\\n\u5728 TypeScript\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u63a5\u53e3\u6765\u5b9a\u4e49\u5bf9\u8c61\u7684\u7c7b\u578b\u3002\\n\\n## \u5165\u95e8\u793a\u4f8b\\n\\n```typescript\\ninterface Student {\\n  name: string;\\n  age: number;\\n  address: string;\\n}\\n\\nconst xiaoming: Student = {\\n  name: \'xiaoming\',\\n  age: 20,\\n  address: \'shanghai\'\\n}\\n```\\n\u63a5\u53e3\u4e00\u822c\u9996\u5b57\u6bcd\u5927\u5199\uff0c\u5b9a\u4e49\u7684\u53d8\u91cf\u4e0e\u63a5\u53e3\u7684\u5c5e\u6027\u5fc5\u987b\u4e00\u81f4\uff0c\u591a\u4e00\u4e24\u4e2a\u5c5e\u6027\u6216\u8005\u5c11\u4e00\u4e24\u4e2a\u5c5e\u6027\u90fd\u662f\u4e0d\u5141\u8bb8\u7684\u3002\\n\\n## \u53ef\u9009\u5c5e\u6027\\n\\n```typescript\\ninterface Student {\\n  name: string;\\n  age?: number;  // \u6b64\u5904\u7528?\u4ee3\u8868 age \u4e3a\u53ef\u9009\u5c5e\u6027\uff0c\u5728\u540e\u7eed\u5b9a\u4e49\u53d8\u91cf\u7684\u65f6\u5019\uff0cage\u5c5e\u6027\u53ef\u6709\u53ef\u65e0\\n  eat(): void;\\n}\\nconst xiaoming: Student = {\\n  name: \'xiaoming\',\\n  eat: () => {}\\n}\\n```\\n\\n## \u53ea\u8bfb\u5c5e\u6027\\n\\n\u6211\u4eec\u901a\u8fc7  readonly \u6765\u5b9a\u4e49\u53ea\u8bfb\u5c5e\u6027\\n\\n```typescript\\n// \u53ea\u8bfb\u5c5e\u6027\\ninterface Student {\\n    name: string;\\n    readonly age: number;\\n}\\nconst xiaoming: Student = {\\n    name: \'xiaoming\',\\n    age: 20\\n}\\nxiaoming.age = 30 // \u65e0\u6cd5\u5206\u914d\u5230 \\"age\\" \uff0c\u56e0\u4e3a\u5b83\u662f\u53ea\u8bfb\u5c5e\u6027\u3002ts(2540)\\n```\\n\\n## \u4efb\u610f\u7c7b\u578b\\n\\n\u5f53\u6211\u4eec\u5e0c\u671b\u63a5\u53e3\u5141\u8bb8\u6709\u4efb\u610f\u5c5e\u6027\u7684\u65f6\u5019\uff0c\u53ef\u4ee5\u4f7f\u7528\u4e0b\u9762\u8fd9\u79cd\u65b9\u5f0f \\n```typescript\\ninterface Student {\\n    name: string;\\n    age: number;  //\u7c7b\u578b\u201cnumber\u201d\u7684\u5c5e\u6027\u201cage\u201d\u4e0d\u80fd\u8d4b\u7ed9\u5b57\u7b26\u4e32\u7d22\u5f15\u7c7b\u578b\u201cstring\u201d\u3002ts(2411)\\n    [propName: string]: string;\\n}\\n```\\n\u6709\u4e00\u4e2a\u6ce8\u610f\u70b9\uff0c\u4e00\u65e6\u5b9a\u4e49\u4e86\u4efb\u610f\u5c5e\u6027\uff0c\u90a3\u4e48\u786e\u5b9a\u5c5e\u6027\u4e0e\u53ef\u9009\u5c5e\u6027\u7684\u7c7b\u578b\u5fc5\u987b\u662f\u4efb\u610f\u7c7b\u578b\u7684\u5b50\u96c6\uff0c\u4e0a\u9762 number \u4e0d\u662f\u4efb\u610f\u7c7b\u578b string \uff0c\u5c31\u4f1a\u62a5\u9519\u3002\\n\\n```typescript\\n// \u6b63\u786e\u5199\u6cd5\\ninterface Student {\\n    name: string;\\n    age: number;\\n    [propName: string]: string | number;\\n}\\n\\nconst xiaoming: Student = {\\n    name: \'xiaoming\',\\n    age: 20,\\n    sex: \'male\'\\n}\\n```\\n\\n## \u51fd\u6570\u7c7b\u578b\\n\\n```typescript\\n// \u51fd\u6570\u7c7b\u578b\\ninterface CompareFunc {\\n  (source: string, target: string): boolean;\\n}\\n\\nlet myCompare: CompareFunc;\\n\\nmyCompare = function(source: string, target: string): boolean {\\n  return source === target\\n}\\n\\nmyCompare(\'1\', \'2\')\\n```\\n\\n## \u53ef\u7d22\u5f15\u7c7b\u578b\\n\\n```typescript\\n// \u53ef\u7d22\u5f15\u7684\u7c7b\u578b\\ninterface NameArray {\\n  [index: number]: string;\\n}\\n\\nlet names: NameArray = [\'a\', \'b\', \'c\']\\nconsole.log(names[1]);  // b\\n```\\n\\n## \u63a5\u53e3\u7ee7\u627f \\n\\n```typescript\\n// \u63a5\u53e3\u7ee7\u627f\\ninterface Animal {\\n  age: number;\\n}\\n\\ninterface Dog extends Animal {\\n  color: string;\\n  makeSound(): void;\\n}\\nconst ahuang: Dog = {\\n  age: 1,\\n  color: \'red\',\\n  makeSound() {}\\n}\\nconst gouzi = <Dog>{}\\ngouzi.age = 3\\ngouzi.color = \'white\'\\ngouzi.makeSound = () => {}\\n```"},{"id":"ts-union-types","metadata":{"permalink":"/blog/ts-union-types","source":"@site/blog/ts/union-types.md","title":"TypeScript\u8054\u5408\u7c7b\u578b","description":"\u8054\u5408\u7c7b\u578b\uff08Union Types\uff09\u8868\u793a\u53d8\u91cf\u7684\u53d6\u503c\u53ef\u4ee5\u4e3a\u58f0\u660e\u7684\u591a\u79cd\u7c7b\u578b\u4e2d\u7684\u4e00\u79cd\u3002","date":"2021-04-19T00:00:00.000Z","formattedDate":"April 19, 2021","tags":[{"label":"TypeScript","permalink":"/blog/tags/type-script"}],"readingTime":0.865,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"TypeScript\u8054\u5408\u7c7b\u578b","date":"2021-04-19T00:00:00.000Z","slug":"ts-union-types","tags":["TypeScript"]},"prevItem":{"title":"TypeScript\u63a5\u53e3","permalink":"/blog/ts-interface"},"nextItem":{"title":"TypeScript\u57fa\u7840\u6570\u636e\u7c7b\u578b","permalink":"/blog/ts-basetype"}},"content":"\u8054\u5408\u7c7b\u578b\uff08Union Types\uff09\u8868\u793a\u53d8\u91cf\u7684\u53d6\u503c\u53ef\u4ee5\u4e3a\u58f0\u660e\u7684\u591a\u79cd\u7c7b\u578b\u4e2d\u7684\u4e00\u79cd\u3002\\n\\n\x3c!-- truncate --\x3e\\n\\n## \u7b80\u5355\u793a\u4f8b\\n\\n```ts\\nlet thing: number | string;\\nthing = 23;     // \u6b63\u786e\\nthing = \'23\'    // \u6b63\u786e\\n```\\n\u8fd9\u91cc\u7684 thing \u53d8\u91cf\u53ea\u80fd\u88ab\u8d4b\u503c\u4e3a number \u6216\u8005 string \u7c7b\u578b\u7684\u503c\uff0c\u5176\u4ed6\u7c7b\u578b\u4e0d\u652f\u6301\\n\\n## \u8bbf\u95ee\u8054\u5408\u7c7b\u578b\u7684\u5c5e\u6027\u6216\u8005\u65b9\u6cd5\\n\\n\u6211\u4eec\u53ea\u80fd\u8bbf\u95ee\u6b64\u8054\u5408\u7c7b\u578b\u7684\u58f0\u660e\u7684\u6240\u6709\u7c7b\u578b\u91cc\u5171\u6709\u7684\u5c5e\u6027\u6216\u65b9\u6cd5\uff0c\u53ea\u6709\u5355\u4e2a\u7c7b\u578b\u6240\u652f\u6301\u7684\u5c5e\u6027\u6216\u65b9\u6cd5\u4e0d\u652f\u6301\u8bbf\u95ee\u3002\\n\\n```ts\\nlet demo: boolean | string;\\nconsole.log(demo.length) // \u62a5\u9519\uff1a\u7c7b\u578b\u201cstring | boolean\u201d\u4e0a\u4e0d\u5b58\u5728\u5c5e\u6027\u201clength\u201d\u3002\u7c7b\u578b\u201cfalse\u201d\u4e0a\u4e0d\u5b58\u5728\u5c5e\u6027\u201clength\u201d\u3002\\n```"},{"id":"ts-basetype","metadata":{"permalink":"/blog/ts-basetype","source":"@site/blog/ts/basetype.md","title":"TypeScript\u57fa\u7840\u6570\u636e\u7c7b\u578b","description":"ts\u57fa\u7840\u6570\u636e\u7c7b\u578b\u7684\u5b66\u4e60\u8bb0\u5f55","date":"2021-04-15T15:45:39.000Z","formattedDate":"April 15, 2021","tags":[{"label":"TypeScript","permalink":"/blog/tags/type-script"}],"readingTime":1.15,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"TypeScript\u57fa\u7840\u6570\u636e\u7c7b\u578b","date":"2021-04-15T15:45:39.000Z","slug":"ts-basetype","tags":["TypeScript"]},"prevItem":{"title":"TypeScript\u8054\u5408\u7c7b\u578b","permalink":"/blog/ts-union-types"},"nextItem":{"title":"ES6\u5b66\u4e60\u2014Promise\u7684\u7b80\u5355\u5b9e\u73b0","permalink":"/blog/promise-owner"}},"content":"ts\u57fa\u7840\u6570\u636e\u7c7b\u578b\u7684\u5b66\u4e60\u8bb0\u5f55\\n\\n\x3c!-- truncate --\x3e\\n\\n## boolean\\n\\n```ts\\nlet isDone: boolean = true\\n```\\n\\n\\n## number\\n\\n```ts\\nlet age: number = 23;\\n// \u5341\u516d\u8fdb\u5236\\nlet hexLiteral: number = 0xf00d\\n// \u4e8c\u8fdb\u5236\\nlet binaryLiteral: number = 0b1010\\n// \u516b\u8fdb\u5236\\nlet octalLiteral: number = 0o744\\nlet notAnumber: number = NaN\\nlet infinityNumber: number = Infinity\\n```\\n\\n## string\\n\\n```ts\\nlet helloWorld: string = \'Hello World\'\\nlet myName: string = \'zhanghao\'\\n// \u6a21\u677f\u5b57\u7b26\u4e32\\nlet helloMyName: string = `${helloWorld}:${myName}`\\n```\\n\\n## null\u3001undefined\\n\\n```ts\\nlet u: undefined = undefined\\nlet n: null = null\\n```\\n\\n## any \\n\\nany \u8868\u793a\u4efb\u610f\u503c\\n```ts\\nlet number: any = \'six\'\\nnumber = 6\\n```\\n\\n\\n## void \u7a7a\u503c\uff1a\u8868\u793a\u6ca1\u6709\u4efb\u4f55\u8fd4\u56de\u503c\u7684\u51fd\u6570\\n\\n```ts\\nfunction sayHello(): void {\\n    console.log(\'hello world\')\\n}\\n// \u4e5f\u53ef\u4ee5\u5b9a\u4e49\u4e00\u4e2a void \u7c7b\u578b\u7684\u503c\uff0c\u4f46\u53ea\u80fd\u88ab\u8d4b\u503c\u4e3a undefined \u548c null\\nlet ud1: void = undefined\\nlet ud2: void = null\\n```\\n\\n## \u7c7b\u578b\u63a8\u5bfc\\n\\n```ts\\nlet number = 7 // \u901a\u8fc7\u521d\u59cb\u503c\u63a8\u5bfc number \u53d8\u91cf\u7684\u7c7b\u578b\u4e3a \u6570\u503c\\nnumber = \'seven\'  // \u4e0d\u80fd\u5c06\u7c7b\u578b\u201cstring\u201d\u5206\u914d\u7ed9\u7c7b\u578b\u201cnumber\u201d\u3002ts(2322)\\n```"},{"id":"promise-owner","metadata":{"permalink":"/blog/promise-owner","source":"@site/blog/js/promise-owner.md","title":"ES6\u5b66\u4e60\u2014Promise\u7684\u7b80\u5355\u5b9e\u73b0","description":"\u8bb2\u5b8c promise \u7684\u4f7f\u7528\uff0c\u8fd9\u7bc7\u5b66\u4e60\u4e00\u4e0b\u600e\u4e48\u6765\u5b9e\u73b0\u4e00\u4e2a Promise\uff0c\u5565\u90fd\u4e0d\u8bf4\uff0c\u76f4\u63a5\u5f00\u5199\uff1a","date":"2020-02-20T00:00:00.000Z","formattedDate":"February 20, 2020","tags":[{"label":"Javascript","permalink":"/blog/tags/javascript"},{"label":"ES6","permalink":"/blog/tags/es-6"}],"readingTime":6.64,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"ES6\u5b66\u4e60\u2014Promise\u7684\u7b80\u5355\u5b9e\u73b0","date":"2020-02-20T00:00:00.000Z","slug":"promise-owner","tags":["Javascript","ES6"]},"prevItem":{"title":"TypeScript\u57fa\u7840\u6570\u636e\u7c7b\u578b","permalink":"/blog/ts-basetype"},"nextItem":{"title":"ES6\u5b66\u4e60\u2014Promise\u7684\u4f7f\u7528","permalink":"/blog/promise-base"}},"content":"\u8bb2\u5b8c promise \u7684\u4f7f\u7528\uff0c\u8fd9\u7bc7\u5b66\u4e60\u4e00\u4e0b\u600e\u4e48\u6765\u5b9e\u73b0\u4e00\u4e2a Promise\uff0c\u5565\u90fd\u4e0d\u8bf4\uff0c\u76f4\u63a5\u5f00\u5199\uff1a\\n\\n\x3c!-- truncate --\x3e\\n\\n\u53c2\u8003\uff1a[Promise A+ \u89c4\u8303](http://malcolmyu.github.io/malnote/2015/06/12/Promises-A-Plus/)\u3001[B\u7ad9\u6559\u5b66](https://www.bilibili.com/video/BV1L441157jg?p=8&spm_id_from=pageDriver)\\n\\n## Promise \u7684\u521d\u6b65\u5b9e\u73b0\\n\\n```javascript\\nconst PENDING = \'pending\'\\nconst FULFILLED = \'fulfilled\'\\nconst REJECTED = \'rejected\'\\nclass MyPromise {\\n    constructor(executor) {\\n        // \u53c2\u6570\u6821\u9a8c\\n        if(typeof executor !== \'function\') {\\n            throw new Error(`Promise executor must be a function!`)\\n        }\\n        this.state = PENDING\\n        this.value = null\\n        this.reason = null\\n        // \u7ed1\u5b9a this\\n        executor(this.resolve.bind(this), this.reject.bind(this))\\n    }\\n    resolve(value) {\\n        // \u5fc5\u987b\u662f PENGING \u72b6\u6001\u4e0b\uff0c\u624d\u6267\u884c\\n        if(this.state === PENDING) {\\n            this.state = FULFILLED\\n            this.value = value\\n        }\\n    }\\n    reject(reason) {\\n        // \u5fc5\u987b\u662f PENGING \u72b6\u6001\u4e0b\uff0c\u624d\u6267\u884c\\n        if(this.state === PENDING) {\\n            this.state = REJECTED\\n            this.reason = reason\\n        }\\n    }\\n}\\n\\nconst p = new Promise((resolve, reject) => {\\n    console.log(\'start\')\\n    resolve(2)\\n}).then(value => {\\n\\n}, error => {\\n\\n})\\n```\\n\\n## then \u65b9\u6cd5\u7684\u5b9e\u73b0 \\n\\n```javascript\\nconst PENDING = \'pending\'\\nconst FULFILLED = \'fulfilled\'\\nconst REJECTED = \'rejected\'\\nclass MyPromise {\\n    constructor(executor) {\\n        // \u53c2\u6570\u6821\u9a8c\\n        if(typeof executor !== \'function\') {\\n            throw new Error(`Promise executor must be a function!`)\\n        }\\n        this.state = PENDING\\n        this.value = null\\n        this.reason = null\\n        executor(this.resolve.bind(this), this.reject.bind(this))\\n    }\\n    resolve(value) {\\n        // \u5fc5\u987b\u662f PENGING \u72b6\u6001\u4e0b\uff0c\u624d\u6267\u884c\\n        if(this.state === PENDING) {\\n            this.state = FULFILLED\\n            this.value = value\\n        }\\n    }\\n    reject(reason) {\\n        // \u5fc5\u987b\u662f PENGING \u72b6\u6001\u4e0b\uff0c\u624d\u6267\u884c\\n        if(this.state === PENDING) {\\n            this.state = REJECTED\\n            this.reason = reason\\n        }\\n    }\\n    then(onFulFilled, onRejected) {\\n        // \u53c2\u6570\u5224\u65ad\uff08\u56e0\u4e3a\u4e24\u4e2a\u56de\u8c03\u90fd\u662f\u53ef\u9009\u7684\uff0c\u5982\u679c\u4e0d\u5b58\u5728\uff0c\u91cd\u65b0\u5305\u88c5\u4e00\u4e0b\uff0c\u4e3b\u8981\u5e94\u7528 then \u7a7f\u900f\u7684\u60c5\u51b5\uff09\\n        // p.then().then(value => {})\\n        if(typeof onFulFilled !== \'function\') {\\n            onFulFilled = () => this.value\\n        }\\n        if(typeof onRejected !== \'function\') {\\n            onRejected = () => this.reason\\n        }\\n        if(this.state === PENDING) {\\n\\n        }\\n        if(this.state === FULFILLED) {\\n            onFulFilled(this.value)\\n        }\\n        if(this.state === REJECTED) {\\n            onRejected(this.reason)\\n        }\\n    }\\n}\\n\\nconst p = new Promise((resolve, reject) => {\\n    console.log(\'start\')\\n    reject(2)\\n}).then(value => {\\n    console.log(value, \'value\');\\n}, error => {\\n    console.log(error, \'error\');\\n})\\n```\\n\\n## \u5f02\u6b65\u7684\u5b9e\u73b0\\n\\n```javascript\\nconst PENDING = \'pending\'\\nconst FULFILLED = \'fulfilled\'\\nconst REJECTED = \'rejected\'\\nclass MyPromise {\\n    constructor(executor) {\\n        // \u53c2\u6570\u6821\u9a8c\\n        if(typeof executor !== \'function\') {\\n            throw new Error(`Promise executor must be a function!`)\\n        }\\n        this.state = PENDING\\n        this.value = null\\n        this.reason = null\\n        this.onFulFilledCallbacks = [] // \u6210\u529f\u56de\u8c03\\n        this.onRejectedCallbacks = [] // \u5931\u8d25\u56de\u8c03\\n        // \u901a\u8fc7 try catch \u6355\u83b7 executor \u6267\u884c\u8fc7\u7a0b\u4e2d\u51fa\u7684\u9519\u8bef\uff0c\u901a\u8fc7 reject \u629b\u51fa\\n        try {\\n            executor(this.resolve.bind(this), this.reject.bind(this))\\n        } catch (error) {\\n            this.reject(error)\\n        }\\n    }\\n    resolve(value) {\\n        // \u5fc5\u987b\u662f PENGING \u72b6\u6001\u4e0b\uff0c\u624d\u6267\u884c\\n        if(this.state === PENDING) {\\n            this.state = FULFILLED\\n            this.value = value\\n            this.onFulFilledCallbacks.forEach(cb => cb(value))\\n        }\\n    }\\n    reject(reason) {\\n        // \u5fc5\u987b\u662f PENGING \u72b6\u6001\u4e0b\uff0c\u624d\u6267\u884c\\n        if(this.state === PENDING) {\\n            this.state = REJECTED\\n            this.reason = reason\\n            this.onRejectedCallbacks.forEach(cb => cb(reason))\\n        }\\n    }\\n    then(onFulFilled, onRejected) {\\n        // \u53c2\u6570\u5224\u65ad\uff08\u56e0\u4e3a\u4e24\u4e2a\u56de\u8c03\u90fd\u662f\u53ef\u9009\u7684\uff0c\u5982\u679c\u4e0d\u5b58\u5728\uff0c\u91cd\u65b0\u5305\u88c5\u4e00\u4e0b\uff0c\u4e3b\u8981\u5e94\u7528 then \u7a7f\u900f\u7684\u60c5\u51b5\uff09\\n        // p.then().then(value => {})\\n        if(typeof onFulFilled !== \'function\') {\\n            onFulFilled = () => this.value\\n        }\\n        if(typeof onRejected !== \'function\') {\\n            onRejected = () => this.reason\\n        }\\n        // const p = new MyPromise((resolve, reject) => {\\n        //     setTimeout(() => {\\n        //         resolve(2)\\n        //     })\\n        // })\\n        if(this.state === PENDING) {\\n            // \u5904\u7406\u5f02\u6b65 resolve() reject() \u7684\u60c5\u51b5\\n            this.onFulFilledCallbacks.push(value => {\\n                setTimeout(() => {\\n                    onFulFilled(value)\\n                })\\n            })\\n            this.onRejectedCallbacks.push(reason => {\\n                setTimeout(() => {\\n                    onRejected(reason)\\n                })\\n            })\\n        }\\n        if(this.state === FULFILLED) {\\n            // setTimeout \u6a21\u62df Promise \u5f02\u6b65\u5904\u7406\\n            setTimeout(() => {\\n                onFulFilled(this.value)\\n            })\\n        }\\n        if(this.state === REJECTED) {\\n            // setTimeout \u6a21\u62df Promise \u5f02\u6b65\u5904\u7406\\n            setTimeout(() => {\\n                onRejected(this.reason)\\n            })\\n        }\\n    }\\n}\\n\\nconst p = new MyPromise((resolve, reject) => {\\n    console.log(1)\\n    setTimeout(() => {\\n        reject(2)\\n    })\\n}).then(value => {\\n    console.log(value, \'value\');\\n}, error => {\\n    console.log(error, \'error\');\\n})\\nconsole.log(\'sync log\')\\n```\\n\\n## Promise chain\\n\\n```javascript\\nconst PENDING = \'pending\'\\nconst FULFILLED = \'fulfilled\'\\nconst REJECTED = \'rejected\'\\nclass MyPromise {\\n    constructor(executor) {\\n        // \u53c2\u6570\u6821\u9a8c\\n        if(typeof executor !== \'function\') {\\n            throw new Error(`Promise executor must be a function!`)\\n        }\\n        this.state = PENDING\\n        this.value = null\\n        this.reason = null\\n        this.onFulFilledCallbacks = [] // \u6210\u529f\u56de\u8c03\\n        this.onRejectedCallbacks = [] // \u5931\u8d25\u56de\u8c03\\n        // \u901a\u8fc7 try catch \u6355\u83b7 executor \u6267\u884c\u8fc7\u7a0b\u4e2d\u51fa\u7684\u9519\u8bef\uff0c\u901a\u8fc7 reject \u629b\u51fa\\n        try {\\n            executor(this.resolve.bind(this), this.reject.bind(this))\\n        } catch (error) {\\n            this.reject(error)\\n        }\\n    }\\n    resolve(value) {\\n        // \u5fc5\u987b\u662f PENGING \u72b6\u6001\u4e0b\uff0c\u624d\u6267\u884c\\n        if(this.state === PENDING) {\\n            this.state = FULFILLED\\n            this.value = value\\n            this.onFulFilledCallbacks.forEach(cb => cb(value))\\n        }\\n    }\\n    reject(reason) {\\n        // \u5fc5\u987b\u662f PENGING \u72b6\u6001\u4e0b\uff0c\u624d\u6267\u884c\\n        if(this.state === PENDING) {\\n            this.state = REJECTED\\n            this.reason = reason\\n            this.onRejectedCallbacks.forEach(cb => cb(reason))\\n        }\\n    }\\n    then(onFulFilled, onRejected) {\\n        // \u53c2\u6570\u5224\u65ad\uff08\u56e0\u4e3a\u4e24\u4e2a\u56de\u8c03\u90fd\u662f\u53ef\u9009\u7684\uff0c\u5982\u679c\u4e0d\u5b58\u5728\uff0c\u91cd\u65b0\u5305\u88c5\u4e00\u4e0b\uff0c\u4e3b\u8981\u5e94\u7528 then \u7a7f\u900f\u7684\u60c5\u51b5\uff09\\n        // p.then().then(value => {})\\n        if(typeof onFulFilled !== \'function\') {\\n            onFulFilled = () => this.value\\n        }\\n        if(typeof onRejected !== \'function\') {\\n            onRejected = () => this.reason\\n        }\\n\\n        // \u7531\u4e8e Promise \u72b6\u6001\u4e0d\u53ef\u9006\uff0c\u6240\u4ee5\u8981\u5b9e\u73b0\u94fe\u5f0f\u8c03\u7528\uff0c\u5fc5\u987b\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684 Promise \u5b9e\u4f8b\\n        let promiseNext = new MyPromise((resolve, reject) => {\\n            // const p = new MyPromise((resolve, reject) => {\\n            //     setTimeout(() => {\\n            //         resolve(2)\\n            //     })\\n            // })\\n            if(this.state === PENDING) {\\n                // \u5904\u7406\u5f02\u6b65 resolve() reject() \u7684\u60c5\u51b5\\n                this.onFulFilledCallbacks.push(value => {\\n                    setTimeout(() => {\\n                        try {\\n                            const result = onFulFilled(value)\\n                            resolve(result)\\n                        } catch (error) {\\n                            reject(error)\\n                        }\\n                    })\\n                })\\n                this.onRejectedCallbacks.push(reason => {\\n                    setTimeout(() => {\\n                        try {\\n                            const result = onRejected(reason)\\n                            resolve(result)\\n                        } catch (error) {\\n                            reject(error)\\n                        }\\n                    })\\n                })\\n            }\\n            if(this.state === FULFILLED) {\\n                // setTimeout \u6a21\u62df Promise \u5f02\u6b65\u5904\u7406\\n                setTimeout(() => {\\n                    try {\\n                        const result = onFulFilled(this.value)\\n                        resolve(result)\\n                    } catch (error) {\\n                        reject(error)\\n                    }\\n                })\\n            }\\n            if(this.state === REJECTED) {\\n                // setTimeout \u6a21\u62df Promise \u5f02\u6b65\u5904\u7406\\n                setTimeout(() => {\\n                    try {\\n                        const result = onRejected(this.reason)\\n                        resolve(result)\\n                    } catch (error) {\\n                        reject(error)\\n                    }\\n                })\\n            }\\n        })\\n\\n        return promiseNext\\n    }\\n}\\n\\nconst p = new MyPromise((resolve, reject) => {\\n    console.log(1)\\n    resolve(2)\\n}).then(value => {\\n    console.log(value, \'value\');\\n    return value\\n}, error => {\\n    console.log(error, \'error\');\\n}).then(value => {\\n    console.log(\'value promise2\', value)\\n})\\nconsole.log(\'sync log\')\\n```\\n\\n## \u94fe\u5f0f\u8c03\u7528\u8fd4\u56de\u975e\u57fa\u672c\u7c7b\u578b\uff0c\u6bd4\u5982\u8fd4\u56de\u4e00\u4e2a promise \\n\\n```javascript\\nMyPromise.resolvePromise = function (promise2, x, resolve, reject) {\\n    // x \u4e0e promise \u76f8\u7b49\\n    if (promise2 === x) {\\n        reject(new TypeError(\'Chaining cycle detected for promise\'))\\n    }\\n\\n    let called = false\\n    if (x instanceof MyPromise) {\\n        // \u5224\u65ad x \u4e3a Promise\\n        x.then(\\n            value => {\\n                MyPromise.resolvePromise(promise2, value, resolve, reject)\\n            },\\n            reason => {\\n                reject(reason)\\n            }\\n        )\\n    } else if (x !== null && (typeof x === \'object\' || typeof x === \'function\')) {\\n        // x \u4e3a\u5bf9\u8c61\u6216\u51fd\u6570\\n        try {\\n            const then = x.then\\n            if (typeof then === \'function\') {\\n                then.call(\\n                    x,\\n                    value => {\\n                        if (called) return\\n                        called = true\\n                        MyPromise.resolvePromise(promise2, value, resolve, reject)\\n                    },\\n                    reason => {\\n                        if (called) return\\n                        called = true\\n                        reject(reason)\\n                    }\\n                )\\n            } else {\\n                if (called) return\\n                called = true\\n                resolve(x)\\n            }\\n        } catch (e) {\\n            if (called) return\\n            called = true\\n            reject(e)\\n        }\\n    } else {\\n        resolve(x)\\n    }\\n}\\n```"},{"id":"promise-base","metadata":{"permalink":"/blog/promise-base","source":"@site/blog/js/promise.md","title":"ES6\u5b66\u4e60\u2014Promise\u7684\u4f7f\u7528","description":"1. Promise\u662f\u4ec0\u4e48","date":"2020-02-17T00:00:00.000Z","formattedDate":"February 17, 2020","tags":[{"label":"Javascript","permalink":"/blog/tags/javascript"},{"label":"ES6","permalink":"/blog/tags/es-6"}],"readingTime":6.655,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"ES6\u5b66\u4e60\u2014Promise\u7684\u4f7f\u7528","date":"2020-02-17T00:00:00.000Z","slug":"promise-base","tags":["Javascript","ES6"]},"prevItem":{"title":"ES6\u5b66\u4e60\u2014Promise\u7684\u7b80\u5355\u5b9e\u73b0","permalink":"/blog/promise-owner"},"nextItem":{"title":"\u4ece\u8f93\u5165 URL \u5230\u9875\u9762\u5c55\u793a\u5230\u5e95\u53d1\u751f\u4e86\u4ec0\u4e48\uff1f","permalink":"/blog/common/url2page"}},"content":"## 1. Promise\u662f\u4ec0\u4e48\\n\\nPromise \u662f JavaScript \u5f02\u6b65\u7f16\u7a0b\u7684\u4e00\u79cd\u65b0\u7684\u89e3\u51b3\u65b9\u6848\uff0c\u6bd4\u4f20\u7edf\u7684\u56de\u8c03\u5904\u7406\u65b9\u5f0f\u66f4\u52a0\u5408\u7406\u3002\\n\\n\x3c!-- truncate --\x3e\\n\\nPromise \u7684\u4e09\u79cd\u72b6\u6001\uff1a\\n- *** PENDING ***\\n- *** FULFILLED ***\\n- *** REJECTED ***\\n\\n\u72b6\u6001\u53d8\u5316\u5982\u4e0b\u56fe\uff1a\\n\\n![promise-states.png](https://i.loli.net/2021/04/19/1eLOWHxvAkrqNUF.png)\\n\\n## 2. \u57fa\u672c\u7528\u6cd5 \\n\\n```javascript\\nconst promise = new Promise((resolve, reject) => {\\n    if(success) {\\n        resolve()\\n    }else {\\n        reject()\\n    }\\n})\\n```\\n\\nPromise \u6784\u9020\u51fd\u6570\u63a5\u53d7\u4e00\u4e2a\u56de\u8c03\u51fd\u6570\u4f5c\u4e3a\u53c2\u6570\uff0c\u51fd\u6570\u7684\u4e24\u4e2a\u53c2\u6570 resolve\u3001reject\uff08\u90fd\u662f\u53ef\u9009\u53c2\u6570\uff09 \uff0c\u5b83\u4eec\u662f\u4e24\u4e2a\u51fd\u6570\uff0c\u7531 JavaScript \u5f15\u64ce\u63d0\u4f9b\uff0c\u4e0d\u9700\u8981\u81ea\u5df1\u5b9a\u4e49\u3002\\n\\n- resolve \u7684\u4f5c\u7528  \\n\u5c06 Promise \u7684\u72b6\u6001\u4ece *** PENDING *** \u53d8\u4e3a *** FULFILLED ***\uff0c\u4e00\u822c\u5728\u5f02\u6b65\u64cd\u4f5c\u6210\u529f\u65f6\u8c03\u7528\uff0c\u5c06\u5f02\u6b65\u64cd\u4f5c\u7684\u7ed3\u679c\uff0c\u4f5c\u4e3a\u53c2\u6570\u4f20\u9012\u51fa\u53bb\uff1b\\n\\n- reject \u7684\u4f5c\u7528  \\n\u5c06 Promise \u7684\u72b6\u6001\u4ece *** PENDING *** \u53d8\u4e3a *** REJECTED ***\uff0c\u4e00\u822c\u5728\u5f02\u6b65\u64cd\u4f5c\u5931\u8d25\u65f6\u8c03\u7528 \uff0c\u5c06\u5f02\u6b65\u64cd\u4f5c\u62a5\u51fa\u7684\u9519\u8bef\u4f5c\u4e3a\u53c2\u6570\u4f20\u9012\u51fa\u53bb\u3002\\n  \\n  \\n\u5728\u6211\u4eec\u521b\u5efa\u4e00\u4e2a Promise \u5b9e\u4f8b\u4e4b\u540e\uff0c\u53ef\u4ee5\u7528 then \u65b9\u6cd5\u5206\u522b\u6307\u5b9a ***FULFILLED*** \u72b6\u6001\u548c ***REJECTED*** \u72b6\u6001\u65f6\u7684\u56de\u8c03\u51fd\u6570\u3002\\n```javascript\\npromise.then(value => {\\n    console.log(\'\u8fd9\u91cc\u63a5\u6536 resolve \u51fa\u6765\u7684\u7ed3\u679c\')\\n}, error => {\\n    console.log(\'\u8fd9\u91cc\u63a5\u6536 reject \u51fa\u6765\u7684\u9519\u8bef\')\\n})\\n```\\n\\n## 3. \u7b80\u5355\u793a\u4f8b\uff0c\u5b9e\u73b0\u4e00\u4e2a\u5f02\u6b65\u52a0\u8f7d\u56fe\u7247\u7684\u65b9\u6cd5\\n\\n```javascript\\nfunction loadImageAsync(src) {\\n    const promise = new Promise((resolve, reject) => {\\n        const image = new Image()\\n        image.onload = () => {\\n            resolve(image)\\n        }\\n        image.onerror = () => {\\n            reject(new Error(`${url}\uff0c\u56fe\u7247\u52a0\u8f7d\u5931\u8d25`))\\n        }\\n        image.src = src\\n    })\\n    return promise\\n}\\nloadImageAsync(\'https://www.baidu.com/img/PCtm_d9c8750bed0b3c7d089fa7d55720d6cf.png\').then(res => {\\n    console.log(res) // <img src=\\"https://www.baidu.com/img/PCtm_d9c8750bed0b3c7d089fa7d55720d6cf.png\\">\\n})\\n```\\n\\n<iframe src=\\"https://codesandbox.io/embed/blog-esnest-promise-demo-2o0eo?fontsize=14&hidenavigation=1&theme=dark&view=preview\\"\\nstyle={{\\n    width: \'100%\',\\n    height: 500,\\n    border: 0,\\n    borderRadius: 4,\\n    overflow: \'hidden\'\\n}}\\ntitle=\\"blog-esnest-promise-demo\\"\\nallow=\\"accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking\\"\\nsandbox=\\"allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts\\"\\n></iframe>\\n\\n## 4. \u5b9e\u4f8b\u65b9\u6cd5\\n\\n### Promise.prototype.then\\n\\n.then \u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u8be5\u51fd\u6570\u5728 promise resolved \u540e\u8fd0\u884c\u5e76\u63a5\u6536\u5230\u7ed3\u679c  \\n.then \u7684\u7b2c\u4e8c\u4e2a\u53c2\u6570\u4e5f\u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u5b83\u4f1a\u5728 promise rejected \u540e\u8fd0\u884c\u5e76\u63a5\u6536\u5230 error \u3002\\n\\n```javascript\\nconst promise = new Promise((resolve, reject) => {})\\npromise.then(value => {}, error => {})\\n```\\n\\n### Promise.prototype.catch\\n\\n\u5982\u679c\u6211\u4eec\u53ea\u5bf9 error \u611f\u5174\u8da3\uff0c\u90a3\u4e48\u5728\u4f7f\u7528 .then \u7684\u65f6\u5019\uff0c\u53ef\u4ee5\u5c06 null \u4f5c\u4e3a\u6211\u4eec\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\uff0c\\n.then(null, errorHandleFunction)\uff0c\u6216\u8005\u4f7f\u7528 catch \u6765\u6355\u83b7 error\uff0ccatch \u53ea\u662f\u4e00\u4e2a\u8bed\u6cd5\u7cd6\uff0c\\n\u5b83\u7684\u5904\u7406\u5982\u4e0b\u6240\u793a\uff1a\\n\\n```javascript\\nPromise.prototype.catch = function (fn) {\\n    return this.then(null, fn)\\n}\\n```\\n\\n```javascript\\n// \u4f7f\u7528\u65b9\u5f0f\\nconst promise = new Promise((resolve, reject) => {\\n    resolve() // or reject()\\n})\\npromise.then(value => {}).catch(error => {})\\n```\\n\\n\u7591\u95ee\uff1a\u540c\u6837\u662f\u6355\u83b7 error \u5f02\u5e38\uff0cPromise\u4e2d\u7684then\u7b2c\u4e8c\u4e2a\u53c2\u6570\u548ccatch\u6709\u4ec0\u4e48\u533a\u522b\u5462\uff1f  \\n\\n\u7b54\uff1a\u5982\u679c then \u7684\u7b2c\u4e00\u4e2a\u51fd\u6570\u91cc\u629b\u51fa\u9519\u8bef\uff0c\u5219 catch \u80fd\u6355\u83b7\u5230\uff0c\u800c then \u7684\u7b2c\u4e8c\u4e2a\u53c2\u6570\u6355\u83b7\u4e0d\u5230\uff1b\\nthen \u7684\u7b2c\u4e8c\u4e2a\u53c2\u6570\u4e0e catch \u6355\u83b7\u9519\u8bef\u4fe1\u606f\u7684\u65f6\u5019\u9075\u5b88\u5c31\u8fd1\u539f\u5219\uff0c\u5982\u679c promise \u5185\u90e8\u62a5\u9519\uff0c reject\u51fa\\n\u9519\u8bef\u540e\uff0cthen \u7684\u7b2c\u4e8c\u4e2a\u53c2\u6570\u548c catch \u90fd\u5b58\u5728\u7684\u60c5\u51b5\u4e0b\uff0c\u53ea\u6709 then \u7684\u7b2c\u4e8c\u4e2a\u53c2\u6570\u80fd\u6355\u83b7\u5230\uff0c\u5982\u679c then \u7684\u7b2c\u4e8c\u4e2a\u53c2\u6570\\n\u4e0d\u5b58\u5728\uff0c\u5219 catch \u4f1a\u6355\u83b7\u5230\uff0c\u4e00\u822c\u6211\u4eec\u90fd\u4f7f\u7528 catch \u6765\u6355\u83b7 error \u3002\\n\\n### Promise.prototype.finally\\n\\nfinally \u5904\u7406\u7a0b\u5e8f\u6ca1\u6709\u53c2\u6570\uff0c\u5728 finally \u4e2d\uff0c\u6211\u4eec\u4e0d\u77e5\u9053 promise \u662f\u5426\u6210\u529f\uff0c\u4e00\u822c\u6211\u4eec\u53ef\u4ee5\u7528\u5b83\u6765\u505a\u4e00\u4e9b\u6e05\u7406\u5de5\u4f5c\uff0c\\n\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u8bf7\u6c42\u6570\u636e\uff0c\u663e\u793a loading\uff0c\u4e0d\u7ba1\u6570\u636e\u662f\u5426\u8bf7\u6c42\u6210\u529f\uff0c\u8bf7\u6c42\u7ed3\u675f\u540e\u90fd\u5f97\u5173\u95ed loading\u3002\\n\\n```javascript\\n// \u4f7f\u7528\u65b9\u5f0f\\nconst promise = new Promise((resolve, reject) => {\\n    resolve() // or reject()\\n})\\nlet loading = true\\npromise.then(value => {}).catch(error => {}).finally(() => {\\n    loading = false\\n})\\n```\\n\\n## 5. \u9759\u6001\u65b9\u6cd5\\n\\n### Promise.all\\n\\n\u7528\u4e8e\u5e76\u53d1\u6267\u884c\u591a\u4e2a promise\uff0c\u5e76\u7b49\u5f85\u6240\u6709 promise \u90fd\u51c6\u5907\u5c31\u7eea\uff0c\u5b83\u7684\u53c2\u6570\u4e3a\u4e00\u4e2a promise \u5217\u8868\uff0c\u8bed\u6cd5 \uff1a\\n\\n```javascript\\nconst promise = Promise.all([...promise])\\n```\\n\\n```javascript\\nlet promise1 = new Promise((resolve, reject) => resolve(1))\\nlet promise2 = new Promise((resolve, reject) => resolve(2))\\nlet promise3 = new Promise((resolve, reject) => resolve(3))\\nlet allPromise = Promise.all([promise1, promise2, promise3])\\nallPromise.then(result => {\\n    console.log(result) // [1,2,3]\uff0c\u5fc5\u987b\u6240\u6709 promies \u90fd resolve\uff0c\u624d\u4f1a\u62ff\u5230 result \u7ed3\u679c \\n}).catch(error => {\\n    // \u5982\u679c\u4efb\u610f\u4e00\u4e2a promise \u88ab reject\uff0c\u7531 Promise.all \u8fd4\u56de\u7684 promise \u5c31\u4f1a\u7acb\u5373 reject\uff0c\u5e76\u4e14\u62ff\u5230\u7684\u5c31\u662f\u8fd9\u4e2a error\u3002\\n})\\n```\\n\\n### Promise.allSettled \uff08ES2020\u65b0\u7279\u6027\uff0c\u975e\u6807\u51c6\uff0c\u65e7\u7248\u672c\u6d4f\u89c8\u5668\u9700\u8981 polyfill\uff09\\n\\n\u4ece\u4e0a\u9762\u7684\u4f8b\u5b50\u53ef\u4ee5\u770b\u51fa\uff0cPromise.all \u867d\u7136\u6709\u5e76\u53d1\u8bf7\u6c42\u7684\u80fd\u529b\uff0c\u4f46\u662f\u4e00\u65e6\u67d0\u4e2a\u4efb\u52a1 reject \uff0c\u90a3\u4e48\u6574\u4e2a\u4efb\u52a1\u90fd\u4f1a\u6302\u6389\uff0c\\nPromise \u76f4\u63a5\u8fdb\u5165 reject \u72b6\u6001\uff0c\u5982\u679c\u6211\u4eec\u9700\u8981\u5728\u5e76\u53d1\u4efb\u52a1\u4e2d\uff0c\u65e0\u8bba\u4e00\u4e2a\u4efb\u52a1\u6b63\u5e38\u6216\u8005\u5f02\u5e38\uff0c\u90fd\u4f1a\u8fd4\u56de\u5bf9\u5e94\u7684\u7684\u72b6\u6001\uff08fulfilled \u6216\u8005 rejected\uff09\u4e0e\u7ed3\u679c\uff08value \u6216\u8005 reason\uff09\uff0c\\n\u8fd9\u5c31\u80fd\u6700\u5927\u9650\u5ea6\u7684\u4fdd\u969c\u4e1a\u52a1\u5f53\u524d\u72b6\u6001\u7684\u53ef\u8bbf\u95ee\u6027\uff0c\u800c Promise.allSettled \u5c31\u662f\u7528\u6765\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u7684\u3002\\n\\n```javascript\\nlet promise1 = new Promise((resolve, reject) => resolve(1))\\nlet promise2 = new Promise((resolve, reject) => resolve(2))\\nlet promise3 = new Promise((resolve, reject) => reject(3))\\nlet allSettled = Promise.allSettled([promise1, promise2, promise3])\\nallSettled.then(result => {\\n  console.log(result)  \\n  // [{status: \'fulfilled\', value: 1},{status: \'fulfilled\', value: 2}, {status: \'rejected\', reason: 3}]\\n}).catch(error => {\\n  console.log(error)\\n})\\n```\\n\\n### Promise.race\\n\\nrace\uff0c\u987e\u540d\u601d\u8bae\u5c31\u662f\\"\u8d5b\u8dd1\\"\uff0c\u5728\u5e76\u53d1\u8bf7\u6c42\u4e2d\uff0c\u5f53\u7b2c\u4e00\u4e2a Promise \u6267\u884c\u7ed3\u675f\u62ff\u5230 value \u6216\u8005 reason \u7684\u65f6\u5019\u5c31\u7ed3\u675f\u3002\\n\\n```javascript\\nlet promise1 = new Promise((resolve, reject) => setTimeout(() => resolve(1), 1000))\\nlet promise2 = new Promise((resolve, reject) => setTimeout(() => resolve(2), 500))\\nlet promise3 = new Promise((resolve, reject) => setTimeout(() => resolve(3), 2000))\\nlet allPromise = Promise.race([promise1, promise2, promise3])\\nallPromise.then(result => {\\n  console.log(result) // 2\\n}).catch(error => {\\n  console.log(error)\\n})\\n\\nlet promise1 = new Promise((resolve, reject) => setTimeout(() => resolve(1), 1000))\\nlet promise2 = new Promise((resolve, reject) => setTimeout(() => resolve(2), 500))\\nlet promise3 = new Promise((resolve, reject) => setTimeout(() => reject(3), 100))\\nlet allPromise = Promise.race([promise1, promise2, promise3])\\nallPromise.then(result => {\\n    console.log(result)\\n}).catch(error => {\\n    console.log(error) // 3\\n})\\n```\\n\\n### Promise.resolve \u3001 Promise.reject\\n\\n```javascript\\nPromise.resolve(1)\\n// ====>\\nlet promise = new Promise(resolve => resolve(1))\\n\\nPromise.resolve(2)\\n// ====>\\nlet promise = new Promise((null, reject) => reject(2))\\n```"},{"id":"/common/url2page","metadata":{"permalink":"/blog/common/url2page","source":"@site/blog/common/url2page.md","title":"\u4ece\u8f93\u5165 URL \u5230\u9875\u9762\u5c55\u793a\u5230\u5e95\u53d1\u751f\u4e86\u4ec0\u4e48\uff1f","description":"1. \u8f93\u5165\u5730\u5740\uff08\u8fd9\u8fb9\u53ea\u8ba8\u8bba\u8f93\u5165\u57df\u540d\u6216\u8005ip\uff0c\u5176\u4ed6\u4e0d\u8003\u8651\uff09","date":"2020-02-06T00:00:00.000Z","formattedDate":"February 6, 2020","tags":[{"label":"Interview","permalink":"/blog/tags/interview"}],"readingTime":3.225,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"\u4ece\u8f93\u5165 URL \u5230\u9875\u9762\u5c55\u793a\u5230\u5e95\u53d1\u751f\u4e86\u4ec0\u4e48\uff1f","date":"2020-02-06T00:00:00.000Z","tags":["Interview"]},"prevItem":{"title":"ES6\u5b66\u4e60\u2014Promise\u7684\u4f7f\u7528","permalink":"/blog/promise-base"},"nextItem":{"title":"csrf \u8de8\u7ad9\u8bf7\u6c42\u4f2a\u9020","permalink":"/blog/http/csrf"}},"content":"## 1. \u8f93\u5165\u5730\u5740\uff08\u8fd9\u8fb9\u53ea\u8ba8\u8bba\u8f93\u5165\u57df\u540d\u6216\u8005ip\uff0c\u5176\u4ed6\u4e0d\u8003\u8651\uff09\\n\\n\u5904\u7406\u7528\u6237\u8f93\u5165\uff0c\u5982\u679c\u7528\u6237\u8f93\u5165\u7684\u662f ip \u5730\u5740\uff0c\u76f4\u63a5\u7ed5\u8fc7\u7b2c\u4e8c\u6b65\uff0c\u4ece\u7b2c\u4e09\u6b65\u5f00\u59cb\u5904\u7406\uff1b\u5982\u679c\u7528\u6237\u8f93\u5165\u7684\u662f\u57df\u540d\uff0c\u5219\u8fdb\u884c\u4e0b\u4e00\u6b65\uff1a\u57df\u540d\u89e3\u6790 \\n\\n\x3c!-- truncate --\x3e\\n\\n## 2. DNS\uff08Domain Name System\uff09 \u57df\u540d\u89e3\u6790\u7cfb\u7edf\\n\\n\u5b83\u662f\u4e00\u4e2a\u5c06\u57df\u540d\u548c ip \u5730\u5740\u76f8\u4e92\u6620\u5c04\u7684\u4e00\u4e2a\u5206\u5e03\u5f0f\u6570\u636e\u5e93\uff0c\u5b83\u7684\u4f5c\u7528\u7b80\u5355\u6765\u8bf4\u5c31\u662f\u57df\u540d\u5230 ip \u7684\u8f6c\u6362\\n\\n```javascript\\nwww.baidu.com  --\x3e  DNS  --\x3e 180.101.49.21\\n```\\n\u57df\u540d\u89e3\u6790\u7684\u8fc7\u7a0b\uff1a\\n- \u6d4f\u89c8\u5668 DNS \u7f13\u5b58\uff0c\u6bd4\u5982 chrome \u6d4f\u89c8\u5668\u53ef\u4ee5\u901a\u8fc7\u5730\u5740\u680f\u8f93\u5165 chrome://net-internals/#dns \u67e5\u770b\u5f53\u524d\u7f13\u5b58\\n- \u64cd\u4f5c\u7cfb\u7edf DNS \u7f13\u5b58\\n- \u5982\u679c\u4e0a\u9762\u4e24\u4e2a\u7f13\u5b58\u4e2d\u90fd\u6ca1\u6709\u5339\u914d\u5230\uff0c\u5c31\u5728 host \u6587\u4ef6\u4e2d\u67e5\u627e\\n- \u8def\u7531\u5668\u7f13\u5b58\uff0c\u90e8\u5206\u8def\u7531\u5668\u4e5f\u4f1a\u63d0\u4f9b DNS \u7f13\u5b58\u7684\u529f\u80fd\uff0c\u8bbf\u95ee\u8fc7\u7684\u57df\u540d\u4f1a\u4fdd\u5b58\u4e2d\u8def\u7531\u5668\u4e2d\\n- ISP \u4e92\u8054\u7f51\u670d\u52a1\u63d0\u4f9b\u5546\uff08\u5982\u4e2d\u56fd\u7535\u4fe1\uff09\u63d0\u4f9b\u7684 DNS \u670d\u52a1\uff0c\u6bd4\u5982\u5f88\u5e38\u7528\u7684 114.114.114.114\u30018.8.8.8(google)\uff0cISP\u4f1a\u5728\u5f53\u524d\u670d\u52a1\u5668\u7f13\u5b58\u4e2d\u67e5\u627e\u89e3\u6790\u8bb0\u5f55\uff0c\u5982\u679c\u6709\uff0c\u8fd4\u56de ip \uff0c\u5982\u679c\u6ca1\u6709\uff0c\u5f00\u59cb\u5411 DNS \u6839\u670d\u52a1\u5668\u8bf7\u6c42\u67e5\u8be2\\n- DNS \u6839\u670d\u52a1\u5668\u5224\u65ad\u57df\u540d \u662f\u6388\u6743\u5230\u54ea\u53f0\u57df\u670d\u52a1\u5668\uff0c\u6bd4\u5982\u6211\u4eec\u8f93\u5165\u7684\u5730\u5740\u662f www.baidu.com\uff0c\u5219\u57df\u670d\u52a1\u5668\u5c31\u662f .com \u57df\u670d\u52a1\u5668\uff0c\u7136\u540e\u518d\u67e5\u627e\u5230 baidu.com \u57df\u670d\u52a1\u5668\u62ff\u5230 ip \u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef\\n\\n\\n## 3. \u5efa\u7acb TCP \u8fde\u63a5\\n\\n\u6709\u4e86 ip \u5730\u5740\uff0c\u5ba2\u6237\u7aef\u5c31\u53ef\u4ee5\u4e0e\u8d44\u6e90\u670d\u52a1\u5668\u901a\u8fc7\u4e09\u6b21\u63e1\u624b\u5efa\u7acb TCP \u8fde\u63a5\u5566\u3002\\n\\n## 4. \u53d1\u9001 http \u8bf7\u6c42\\n\\n\u57fa\u4e8e TCP \u8fde\u63a5\uff0c\u5ba2\u6237\u7aef\u5c31\u53ef\u4ee5\u5411\u8d44\u6e90\u670d\u52a1\u5668\u53d1\u9001\u4e00\u6b21 http \u8bf7\u6c42\uff0c\u83b7\u53d6\u5230 html \u6587\u6863\u5185\u5bb9\uff1b\u8fd9\u4e00\u6b65\u4f1a\u6d89\u53ca\u5230\u53e6\u4e00\u4e2a\u7f13\u5b58\u4e0a\u7684\u4f18\u5316\uff0c\u6d4f\u89c8\u5668\u7f13\u5b58\uff0c\u5982\u679c\u547d\u4e2d\u5f3a\u7f13\u5b58\uff0c\u5219\u4e0d\u9700\u8981\u5411\u670d\u52a1\u5668\u53d1\u9001\u8bf7\u6c42\uff0c\\n\u76f4\u63a5\u4ece\u672c\u5730\u7f13\u5b58\u4e2d\u53d6\u51fa html \u5185\u5bb9\uff0c\u5982\u679c\u672a\u547d\u4e2d\uff0c\u5219\u4e0e\u670d\u52a1\u5668\u901a\u4fe1\uff0c\u5224\u65ad\u662f\u5426\u547d\u4e2d\u534f\u5546\u7f13\u5b58\uff0c\u5982\u679c\u547d\u4e2d\uff0c\u670d\u52a1\u5668\u8fd4\u56de 304 \u72b6\u6001\u7801\uff0c\u5ba2\u6237\u7aef\u4ece\u6d4f\u89c8\u5668\u7f13\u5b58\u4e2d\u83b7\u53d6\u5185\u5bb9\uff0c\u5982\u679c\u672a\u547d\u4e2d\u534f\u5546\u7f13\u5b58\uff0c\u670d\u52a1\u5668\\n\u8fd4\u56de\u6700\u65b0\u7684 html \u6587\u6863\uff0c\u4ee5\u53ca http code 200\u3002\\n\\n```javascript\\nRequest URL: http://www.baidu.com/\\nRequest Method: GET\\nStatus Code: 200 OK\\nRemote Address: 180.101.49.11:443\\nReferrer Policy: strict-origin-when-cross-origin\\n```\\n\\n## 5. \u6e32\u67d3\u6811\u6784\u5efa\u3001\u5e03\u5c40\u53ca\u7ed8\u5236\\n\\n- \u5904\u7406 HTML \u6807\u8bb0\u5e76\u6784\u5efa DOM \u6811\\n- \u5904\u7406 CSS \u6807\u8bb0\u5e76\u6784\u5efa CSSOM \u6811\\n- \u5c06 DOM \u4e0e CSSOM \u5408\u5e76\u4e3a RENDER TREE\\n- \u6839\u636e RENDER TREE \u6765\u5e03\u5c40\uff0c\u8ba1\u7b97\u6bcf\u4e2a\u8282\u70b9\u7684\u51e0\u4f55\u4fe1\u606f\\n- \u7ed8\u5236\u8282\u70b9"},{"id":"/http/csrf","metadata":{"permalink":"/blog/http/csrf","source":"@site/blog/http/csrf.md","title":"csrf \u8de8\u7ad9\u8bf7\u6c42\u4f2a\u9020","description":"\u5b9a\u4e49","date":"2019-10-21T00:00:00.000Z","formattedDate":"October 21, 2019","tags":[{"label":"http/https","permalink":"/blog/tags/http-https"}],"readingTime":1.53,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"csrf \u8de8\u7ad9\u8bf7\u6c42\u4f2a\u9020","date":"2019-10-21T00:00:00.000Z","tags":["http/https"]},"prevItem":{"title":"\u4ece\u8f93\u5165 URL \u5230\u9875\u9762\u5c55\u793a\u5230\u5e95\u53d1\u751f\u4e86\u4ec0\u4e48\uff1f","permalink":"/blog/common/url2page"},"nextItem":{"title":"css\u76d2\u5b50\u6a21\u578b","permalink":"/blog/css/box"}},"content":"## \u5b9a\u4e49\\n\\nCross-site request forgery\uff1a\u653b\u51fb\u8005\u8bf1\u5bfc\u53d7\u5bb3\u8005\u8fdb\u5165***\u7b2c\u4e09\u65b9\u7f51\u7ad9***\uff0c\u5728\u7b2c\u4e09\u65b9\u7f51\u7ad9\u4e2d\uff0c\u5411\u88ab\u653b\u51fb\u7f51\u7ad9\u53d1\u9001\u8de8\u7ad9\u8bf7\u6c42\uff0c\\n\u5229\u7528\u53d7\u5bb3\u8005\u5728\u88ab\u653b\u51fb\u7f51\u7ad9\u5df2\u7ecf\u83b7\u53d6\u7684\u6ce8\u518c\u51ed\u8bc1\uff0c\u7ed5\u8fc7\u540e\u53f0\u7684\u7528\u6237\u9a8c\u8bc1\uff0c\u8fbe\u5230\u5192\u5145\u7528\u6237\u5bf9\u88ab\u653b\u51fb\u7684\u7f51\u7ad9\u6267\u884c\u67d0\u9879\u64cd\u4f5c\u7684\u76ee\u7684\u3002  \\n\\n\x3c!-- truncate --\x3e\\n\\n## \u653b\u51fb\u6d41\u7a0b\\n\\n- \u53d7\u5bb3\u4eba\u767b\u5f55 a.com\uff0c\u5e76\u4fdd\u5b58\u4e86\u767b\u5f55\u51ed\u8bc1 Cookie\\n- \u653b\u51fb\u8005\u5f15\u8bf1\u53d7\u5bb3\u8005\u8bbf\u95ee b.com\\n- b.com \u5411 a.com \u53d1\u9001\u4e86\u4e00\u4e2a\u8bf7\u6c42\uff1aa.com/transfer=x\uff0c\u6d4f\u89c8\u5668\u4f1a\u9ed8\u8ba4\u5e26\u4e0a a.com \u7684 Cookie \u4fe1\u606f\\n- a.com \u63a5\u6536\u5230\u8bf7\u6c42\u540e\uff0c\u5bf9\u8bf7\u6c42\u8fdb\u884c\u9a8c\u8bc1\uff0c\u5e76\u786e\u8ba4\u662f\u53d7\u5bb3\u8005\u7684\u51ed\u8bc1\uff0c\u8bef\u4ee5\u4e3a\u662f\u53d7\u5bb3\u8005\u81ea\u5df1\u53d1\u9001\u7684\u8bf7\u6c42\\n- a.com \u4ee5\u53d7\u5bb3\u8005\u7684\u540d\u4e49\u6267\u884c\u4e86 transfer=x\\n- \u653b\u51fb\u5b8c\u6210\uff0c\u653b\u51fb\u8005\u5728\u53d7\u5bb3\u8005\u4e0d\u77e5\u60c5\u7684\u60c5\u51b5\u4e0b\uff0c\u5192\u5145\u53d7\u5bb3\u8005\uff0c\u8ba9 a.com \u6267\u884c\u4e86\u81ea\u5df1\u5b9a\u4e49\u7684\u64cd\u4f5c\\n\\n## \u7279\u70b9 \\n\\n- \u653b\u51fb\u53d1\u751f\u5728\u7b2c\u4e09\u65b9\u7f51\u7ad9\\n- \u653b\u51fb\u5229\u7528\u767b\u5f55\u51ed\u8bc1\u5192\u5145\u53d7\u5bb3\u8005\u8fdb\u884c\u63d0\u4ea4\u64cd\u4f5c\\n- \u8de8\u7ad9\u5f62\u5f0f\uff1a\u56fe\u7247url\u3001\u8d85\u94fe\u63a5\u3001Form\u8868\u5355\u63d0\u4ea4\u7b49\\n\\n## \u9632\u62a4\u7b56\u7565\\n\\n- SameSite \u8bbe\u7f6e\u9632\u62a4\\n- CSRF TOKEN\u6821\u9a8c `<input type=\\"hidden\\" name=\\"csrftoken\\" value=\\"tokenvalue\\"/>`\\n- HTTP Header  Origin\u3001Referer \u6821\u9a8c"},{"id":"/css/box","metadata":{"permalink":"/blog/css/box","source":"@site/blog/css/box.md","title":"css\u76d2\u5b50\u6a21\u578b","description":"\u6982\u5ff5","date":"2018-10-25T00:00:00.000Z","formattedDate":"October 25, 2018","tags":[{"label":"css/css3","permalink":"/blog/tags/css-css-3"}],"readingTime":1.715,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"css\u76d2\u5b50\u6a21\u578b","date":"2018-10-25T00:00:00.000Z","tags":["css/css3"]},"prevItem":{"title":"csrf \u8de8\u7ad9\u8bf7\u6c42\u4f2a\u9020","permalink":"/blog/http/csrf"},"nextItem":{"title":"DOM\u5e38\u7528\u5c5e\u6027\u4e0e\u65b9\u6cd5","permalink":"/blog/dom-base"}},"content":"## \u6982\u5ff5\\n\\nCSS \u76d2\u6a21\u578b\u672c\u8d28\u4e0a\u662f\u4e00\u4e2a\u76d2\u5b50\uff0c\u76d2\u5b50\u5305\u88f9\u7740HTML \u5143\u7d20\uff0c\u76d2\u5b50\u4e3b\u8981\u7531\u56db\u4e2a\u5c5e\u6027\u7ec4\u6210\uff0c\u4ece\u5185\u5230\u5916\u5206\u522b\u662f\uff1a***content*** \u3001***padding*** \u3001***border***\u3001***margin***\uff0c\\n\\n\x3c!-- truncate --\x3e\\n\\n\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u770b\u4e0b\u9762\u8fd9\u5f20\u56fe\uff0c\u6700\u5916\u9762\u6a59\u8272\u7684\u5c31\u662f\u5916\u8fb9\u8ddd\u533a\u57df ***margin***\uff0c\u5f80\u91cc\u9ec4\u8272\u7684\u662f\u8fb9\u6846\u533a\u57df ***border***\uff0c\u518d\u5f80\u91cc\u7684\u7eff\u8272\u7684\u662f\u5185\u8fb9\u8ddd\u533a\u57df ***padding***\uff0c\u6700\u91cc\u9762\u7eff\u8272\u7684\u5c31\u662f\u5185\u5bb9\u533a\u57df ***content*** \u3002\\n\\n![image.png](https://i.loli.net/2021/05/11/MLDKksrGudhcyOb.png)\\n\\n## \u5206\u7c7b \\n\\n### 1. W3C\u6807\u51c6\u76d2\u6a21\u578b \\n\\n\u6574\u4e2a\u5143\u7d20\u7684\u5b9e\u9645\u5bbd\u5ea6 = ***border-left-width*** + ***padding-left*** + ***content-width*** + ***padding-right*** + ***border-right-width***  \\n\u6574\u4e2a\u5143\u7d20\u7684\u5b9e\u9645\u9ad8\u5ea6 = ***border-top-width*** + ***padding-top*** + ***content-height*** + ***padding-bottom*** + ***border-bottom-width***\\n\\n\u5bf9\u5e94css\uff1a\\n```css\\nbox-sizing: content-box;\\n```\\n\\n\u53c2\u8003\uff1a\\n![image.png](https://i.loli.net/2021/05/11/Xy4zxvFfhK61P2g.png)\\n\\n\u6211\u4eec\u53ef\u4ee5\u770b\u5230\uff0c\u867d\u7136\u8bbe\u7f6e\u4e86 box1 \u7684\u5bbd\u5ea6\u4e3a 200px\uff0c\u5b9e\u9645\u5b83\u7684\u5bbd\u5ea6\u662f 280px\uff0c\u4e5f\u5c31\u662f width + \u5de6\u53f3 padding + \u5de6\u53f3 border\uff0c\u5b9e\u9645\u9ad8\u5ea6\u662f 280px\uff0c\u4e5f\u5c31\u662f height + \u4e0a\u4e0b padding + \u4e0a\u4e0b border\\n\\n### 2. IE\u602a\u5f02\u76d2\u6a21\u578b\\n\\n\u6574\u4e2a\u5143\u7d20\u7684\u5b9e\u9645\u5bbd\u5ea6 = \u5b9e\u9645\u8bbe\u7f6e\u7684 width\uff0cwidth \u5305\u542b\u4e86 \u5de6\u53f3\u5185\u8fb9\u8ddd\u4ee5\u53ca\u5de6\u53f3\u8fb9\u6846\\n\u6574\u4e2a\u5143\u7d20\u7684\u5b9e\u9645\u9ad8\u5ea6 = \u5b9e\u9645\u8bbe\u7f6e\u7684 height\uff0cheight \u5305\u542b\u4e86 \u4e0a\u4e0b\u5185\u8fb9\u8ddd\u4ee5\u53ca\u4e0a\u4e0b\u8fb9\u6846\\n\\n\u5bf9\u5e94css\uff1a\\n```css\\nbox-sizing: border-box;\\n```\\n\\n\u53c2\u8003\uff1a\\n![image.png](https://i.loli.net/2021/05/11/G8Jk317hACQRjDi.png)\\n\\n## \u6700\u4f73\u5b9e\u8df5\\n\\n\u4e00\u822c\u4e3a\u4e86\u5e03\u5c40\u4e0a\u7684\u65b9\u4fbf\uff0c\u6211\u4eec\u5c06\u6240\u6709\u7684\u5143\u7d20\u90fd\u8bbe\u7f6e\u4e3a box-sizing: border-box;\\n\\n```css\\nhtml {\\n  box-sizing: border-box;\\n}\\n\\n*,\\n*::before,\\n*::after {\\n  box-sizing: inherit;\\n}\\n```"},{"id":"dom-base","metadata":{"permalink":"/blog/dom-base","source":"@site/blog/js/dom.md","title":"DOM\u5e38\u7528\u5c5e\u6027\u4e0e\u65b9\u6cd5","description":"1. document.getElementById(id)","date":"2018-04-10T15:21:18.000Z","formattedDate":"April 10, 2018","tags":[{"label":"Javascript","permalink":"/blog/tags/javascript"}],"readingTime":3.265,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"DOM\u5e38\u7528\u5c5e\u6027\u4e0e\u65b9\u6cd5","date":"2018-04-10T15:21:18.000Z","slug":"dom-base","tags":["Javascript"]},"prevItem":{"title":"css\u76d2\u5b50\u6a21\u578b","permalink":"/blog/css/box"},"nextItem":{"title":"BOM\u5e38\u7528\u5c5e\u6027\u4e0e\u65b9\u6cd5","permalink":"/blog/bom-base"}},"content":"### 1. document.getElementById(id)\\n\\n\u8fd4\u56de\u7b2c\u4e00\u4e2a id \u4e3a ***id*** \u7684 dom \u5143\u7d20\uff0c\u5982\u627e\u4e0d\u5230\u8fd4\u56de null\\n\\n\x3c!-- truncate --\x3e\\n\\n```js\\n<div id=\'app\'></div>\\n<script>\\n    const app = document.getElementById(\'app\')\\n    const app2 = document.getElementById(\'app2\') // null\\n<\/script>\\n```\\n\\n\\n### 2. document.querySelector(CSS\u9009\u62e9\u5668)\\n\\n\u8fd4\u56de\u7b2c\u4e00\u4e2a\u5339\u914d\u6307\u5b9aCSS\u9009\u62e9\u5668\u7684\u7b2c\u4e00\u4e2a\u5143\u7d20\\n\\n```js\\n<div id=\'app\'></div>\\n<script>\\n    const app = document.querySelector(\'#app\')\\n    const app2 = document.querySelector(\'#app2\') // null\\n<\/script>\\n```\\n\\n### 3. document.querySelectorAll(CSS\u9009\u62e9\u5668)\\n\\n\u8fd4\u56de\u7b2c\u4e00\u4e2a\u5339\u914d\u6307\u5b9aCSS\u9009\u62e9\u5668\u7684\u7b2c\u4e00\u4e2a\u5143\u7d20\\n\\n```js\\n<div id=\'app\'></div>\\n<script>\\n    const app = document.querySelectorAll(\'#app\') // NodeList[div#app]\\n    const app2 = document.querySelectorAll(\'#app2\') // NodeList[]\\n<\/script>\\n```\\n\\n### 4. document.createElement(tagName)\\n\\n\u521b\u5efa\u4e00\u4e2a html \u5143\u7d20\\n\\n```js\\n<div id=\'app\'></div>\\n<script>\\n    const button = document.createElement(\'button\')\\n    button.innerHTML = \'test button\'\\n    document.body.append(button)\\n<\/script>\\n```\\n\\n### 5. element.appendChild(childEle)\\n\\n\u5411\u76ee\u6807\u5143\u7d20 element \u6700\u540e\u6dfb\u52a0\u4e00\u4e2a\u5b50\u8282\u70b9\\n\\n```js\\n<div id=\'app\'>\\n    <p>test p element</p>\\n</div>\\n<script>\\n    const app = document.querySelector(\'#app\')\\n    const button = document.createElement(\'button\')\\n    button.innerHTML = \'test button\'\\n    app.appendChild(button)\\n<\/script>\\n```\\n\\n### 6. element.removeChild(childEle)\\n\\n\u4ece\u76ee\u6807\u5143\u7d20 element \u5220\u9664\u6307\u5b9a\u8282\u70b9\\n\\n```js\\n<div id=\'app\'>\\n    <p id=\'testp\'>test p element</p>\\n</div>\\n<script>\\n    const app = document.querySelector(\'#app\')\\n    const testp = document.querySelector(\'#testp\')\\n    app.removeChild(testp)\\n<\/script>\\n```\\n\\n### 7. element.replaceChild(newnode, oldnode)\\n\\n\u7528\u4e00\u4e2a\u65b0\u8282\u70b9\u66ff\u4ee3\u76ee\u524d\u5143\u7d20\u4e2d\u7684\u65e7\u8282\u70b9\\n\\n```js\\n<div id=\'app\'>\\n    <p id=\'testp\'>test p element</p>\\n</div>\\n<script>\\n    const app = document.querySelector(\'#app\')\\n    const newapp = app.cloneNode(true/false) // true \u514b\u9686\u6240\u6709\u5b50\u8282\u70b9\uff0cfalse\u53ea\u514b\u9686\u7236\u8282\u70b9\\n    document.body.append(newapp)\\n<\/script>\\n```\\n\\n### 8. element.insertBefore(newnode, existingnode)\\n\\n\u5728\u6307\u5b9a\u5143\u7d20\u7684\u73b0\u6709\u8282\u70b9\u524d\u63d2\u5165\u65b0\u8282\u70b9\\n\\n```js\\n<div id=\'app\'>\\n    <p id=\'testp\'>test p element</p>\\n</div>\\n<script>\\n    const app = document.querySelector(\'#app\')\\n    const testp = document.querySelector(\'#testp\')\\n    const newspan = document.createElement(\'span\')\\n    newspan.innerHTML = \'new span\'\\n    app.insertBefore(newspan, testp)\\n<\/script>\\n```\\n\\n### 9. document.createDocumentFragment()\\n\\n\u521b\u5efa\u4e00\u4e2a\u865a\u62df\u7684\u8282\u70b9\u5bf9\u8c61\uff0c\u5728\u628a DocumentFragment \u63d2\u5165\u6587\u6863\u6811\u65f6\uff0c\u4e0d\u4f1a\u63d2\u5165\u5b83\u672c\u8eab\uff0c\u800c\u662f\u5b83\u6240\u6709\u7684\u5b50\u5b59\u8282\u70b9\uff0c\u5f53\u9700\u8981\u6dfb\u52a0\u591a\u4e2a dom\u5143\u7d20\u65f6\uff0c\u53ef\u4ee5\u5148\u52a0\u8fd9\u4e9b\u5143\u7d20\u6dfb\u52a0\u5230 DocumentFragment \u4e2d\uff0c\u518d\u7edf\u4e00\u6dfb\u52a0\u5230\u9875\u9762\u4e2d\uff0c\u4f1a\u51cf\u5c11\u9875\u9762\u6e32\u67d3 dom \u7684\u6b21\u6570\uff0c\u6548\u7387\u660e\u663e\u63d0\u5347\u3002\\n\\n```js\\n<div id=\'app\'>\\n</div>\\n<script>\\n    const fragment = document.createDocumentFragment()\\n<\/script>\\n```\\n\\n### 10. element.setAttribute()\\n\\n\u8bbe\u7f6e\u5143\u7d20\u7684\u5c5e\u6027\u503c \\n\\n```js\\n<div id=\'app\'>\\n</div>\\n<script>\\n    const app = document.querySelector(\'#app\')\\n    app.setAttribute(\'id\', \'newid\') // \u8bbe\u7f6e\u65b0 id\\n<\/script>\\n```\\n\\n### 11. element.getAttribute()\\n\\n\u83b7\u53d6\u5143\u7d20\u7684\u5c5e\u6027\u503c \\n\\n```js\\n<div id=\'app\'>\\n</div>\\n<script>\\n    const app = document.querySelector(\'#app\')\\n    const id = app.getAttribute(\'id\') \\n    console.log(id) // app\\n<\/script>\\n```\\n\\n### 12. element.removeAttribute()\\n\\n\u5220\u9664\u5143\u7d20\u7684\u6307\u5b9a\u5c5e\u6027\u503c \\n\\n```js\\n<div id=\'app\' name=\'testapp\'>\\n</div>\\n<script>\\n    const app = document.querySelector(\'#app\')\\n    app.removeAttribute(\'name\') \\n<\/script>\\n```\\n\\n### 13. window.getComputedStyle(element)\\n\\n\u83b7\u53d6\u5f53\u524d\u5143\u7d20\u6240\u6709\u6700\u7ec8\u4f7f\u7528\u7684 CSS \u5c5e\u6027\u503c\\n\\n```js\\n<div id=\'app\' name=\'testapp\'>\\n</div>\\n<script>\\n    const app = document.querySelector(\'#app\')\\n    window.getComputedStyle(app) // [object CSSStyleDeclaration]\\n<\/script>\\n```\\n\\n\u8fd9\u79cd\u65b9\u6cd5\u4e0e element.style \u7684\u533a\u522b\uff1a\\n\\n1.  getComputedStyle \u65b9\u6cd5\u662f\u53ea\u8bfb\u7684\uff0c\u53ea\u80fd\u83b7\u53d6\u6837\u5f0f\uff0c\u4e0d\u80fd\u8bbe\u7f6e\u6837\u5f0f\uff1b\u800c element.style \u65e2\u53ef\u4ee5\u83b7\u53d6\uff0c\u4e5f\u53ef\u4ee5\u8bbe\u7f6e\\n2.  getComputedStyle \u83b7\u53d6\u6240\u6709 CSS \u5c5e\u6027\u5bf9\u8c61\uff1b\u800c element.style \u53ea\u83b7\u53d6\u5143\u7d20 style \u6539\u6539\u4e2d\u7684 CSS \u6837\u5f0f\\n\\n### 14. element.dataset(\'\')\\n\\n\u83b7\u53d6\u5f53\u524d\u5143\u7d20\u4ee5 data- \u5f00\u5934\u7684\u81ea\u5b9a\u4e49\u5c5e\u6027\\n\\n```js\\n<div id=\'app\' data-name=\'testapp\'>\\n</div>\\n<script>\\n    const app = document.querySelector(\'#app\')\\n    console.log(app.dataset(\'name\')) // testapp\\n<\/script>\\n```"},{"id":"bom-base","metadata":{"permalink":"/blog/bom-base","source":"@site/blog/js/bom.md","title":"BOM\u5e38\u7528\u5c5e\u6027\u4e0e\u65b9\u6cd5","description":"Browser Object Model \u6d4f\u89c8\u5668\u5bf9\u8c61\u6a21\u578b","date":"2018-04-08T15:21:18.000Z","formattedDate":"April 8, 2018","tags":[{"label":"Javascript","permalink":"/blog/tags/javascript"}],"readingTime":0.805,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"BOM\u5e38\u7528\u5c5e\u6027\u4e0e\u65b9\u6cd5","date":"2018-04-08T15:21:18.000Z","slug":"bom-base","tags":["Javascript"]},"prevItem":{"title":"DOM\u5e38\u7528\u5c5e\u6027\u4e0e\u65b9\u6cd5","permalink":"/blog/dom-base"}},"content":"Browser Object Model \u6d4f\u89c8\u5668\u5bf9\u8c61\u6a21\u578b\\n\\n\x3c!-- truncate --\x3e\\n\\n## \u5e38\u7528\u7684\u5c5e\u6027\u4e0e\u65b9\u6cd5\\n### 1. window \u5bf9\u8c61\\n\\n\u5f53\u524d\u6d4f\u89c8\u5668\u7a97\u53e3\u5b9e\u4f8b\uff0c\u9876\u5c42\u5bf9\u8c61\uff0c\u5e38\u7528\u65b9\u6cd5\u5982\u4e0b\uff1a\\n- open(url) \u6253\u5f00\u6307\u5b9a\u7a97\u53e3\\n- close()    \u5173\u95ed\u7a97\u53e3\\n- print()     \u663e\u793a\u6253\u5370\u5bf9\u8bdd\u6846\\n- find()      \u663e\u793a\u67e5\u627e\u5bf9\u8bdd\u6846\uff0c\u67e5\u627e\u6307\u5b9a\u5185\u5bb9\uff0c\u7a97\u53e3\u81ea\u52a8\u8df3\u8f6c\u5230\u7b2c\u4e00\u5904\u6ee1\u8db3\u6761\u4ef6\u7684\u5185\u5bb9\u5904\uff0c\u67e5\u5230\u8fd4\u56de true\uff0c\u53cd\u4e4b false.\\n- alert(str)\u3001confirm(str)\u3001prompt(str, str)\\n\\n![image.png](https://i.loli.net/2021/03/29/PnHpMBiOc2aW93r.png)  \\n![image.png](https://i.loli.net/2021/03/29/rdq45PbKCuWGvxM.png)  \\n![image.png](https://i.loli.net/2021/03/29/gtzjmTMxIrF1VAe.png)  \\n![image.png](https://i.loli.net/2021/03/29/NaKvB39uIXszd6S.png)  \\n\\n\\n### 2. location \u5bf9\u8c61\\n\\n![image.png](https://i.loli.net/2021/03/29/32vQnOV9yhlftNZ.png)\\n\\n### 3. history \u5bf9\u8c61\\n- go(number)\\n- back()\\n- forward()\\n\\n### 4. navigator \u5bf9\u8c61\\n- appName\\n- appVersion\\n- platform\\n- appCodeName\\n- userAgent\\n- ...\\n\\n\\n![image.png](https://i.loli.net/2021/03/29/hmg2U3J5cAfGP4z.png)\\n\\n### 5. screen \u5bf9\u8c61\\n\u8fd4\u56de\u663e\u793a\u6d4f\u89c8\u5668\u5c4f\u5e55\u4fe1\u606f  \\n\\n![image.png](https://i.loli.net/2021/03/29/uXGPlQLCekbByv1.png)"}]}')}}]);